import{a as e,b as t,y as r,h as s,S as a,z as n,o as i,n as u,j as o}from"./index-b7c13edd.js";import{c as l,r as c}from"./vendor-0a74ad82.js";import{s as d}from"./utils-db1934d6.js";import{a8 as b,O as g,A as x,n as h,g as f}from"./ui-5d9f441a.js";var m=function(a){function n(e,t){var r;return(r=a.call(this)||this).client=e,r.setOptions(t),r.bindMethods(),r.updateResult(),r}e(n,a);var i=n.prototype;return i.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},i.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},i.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},i.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},i.getCurrentResult=function(){return this.currentResult},i.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},i.mutate=function(e,r){return this.mutateOptions=r,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,t({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},i.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:r(),s=t({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=s},i.notify=function(e){var t=this;s.batch(function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)})})},n}(a);function p(e,r,a){var o=l.useRef(!1),c=l.useState(0)[1],b=n(e,r,a),g=i(),x=l.useRef();x.current?x.current.setOptions(b):x.current=new m(g,b);var h=x.current.getCurrentResult();l.useEffect(function(){o.current=!0;var e=x.current.subscribe(s.batchCalls(function(){o.current&&c(function(e){return e+1})}));return function(){o.current=!1,e()}},[]);var f=l.useCallback(function(e,t){x.current.mutate(e,t).catch(u)},[]);if(h.error&&d(void 0,x.current.options.useErrorBoundary,[h.error]))throw h.error;return t({},h,{mutate:f,mutateAsync:h.mutate})}const y=({label:e,options:t=[],value:r,onChange:s,placeholder:a="Select an option...",disabled:n=!1,error:i="",required:u=!1,searchable:l=!1,multi:d=!1,className:m="",icon:p,size:y="md",variant:v="default"})=>{const[k,j]=c.useState(!1),[w,N]=c.useState(""),[R,E]=c.useState(-1),O=c.useRef(null),S=c.useRef(null),M=c.useRef([]),C=l?t.filter(e=>e.label.toLowerCase().includes(w.toLowerCase())&&!e.hidden):t.filter(e=>!e.hidden),$=d&&Array.isArray(r)?r:[],L=d?null:t.find(e=>e.value===r);c.useEffect(()=>{const e=e=>{O.current&&!O.current.contains(e.target)&&(j(!1),N(""),E(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),c.useEffect(()=>{k&&l&&S.current&&S.current.focus()},[k,l]),c.useEffect(()=>{E(-1)},[C.length]),c.useEffect(()=>{const e=e=>{if(k)switch(e.key){case"Escape":case"Tab":j(!1),N(""),E(-1);break;case"ArrowDown":e.preventDefault(),E(e=>e<C.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),E(e=>e>0?e-1:C.length-1);break;case"Enter":e.preventDefault(),R>=0&&C[R]&&z(C[R])}};return k&&document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[k,R,C]),c.useEffect(()=>{R>=0&&M.current[R]&&M.current[R].scrollIntoView({block:"nearest",behavior:"smooth"})},[R]);const z=e=>{if(!e.disabled)if(d){const t=$.includes(e.value)?$.filter(t=>t!==e.value):[...$,e.value];s?.(t)}else s?.(e.value),j(!1),N("")};return o.jsxs("div",{className:`relative ${m}`,ref:O,children:[e&&o.jsxs("label",{className:"block text-sm font-medium mb-2 "+(i?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"),children:[e,u&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o.jsxs("div",{className:`${(()=>{const e="w-full text-left border rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-1";if(n)return`${e} bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500 cursor-not-allowed`;if(i)return`${e} bg-white dark:bg-gray-800 border-red-500 dark:border-red-400 focus:ring-red-500 focus:border-red-500 text-gray-900 dark:text-white`;switch(v){case"outline":default:return`${e} bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500 text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500`;case"filled":return`${e} bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600`}})()} ${(()=>{switch(y){case"sm":return"px-3 py-1.5 text-sm";case"lg":return"px-4 py-3 text-base";default:return"px-4 py-2.5 text-sm"}})()} ${k?"ring-2 ring-blue-500 border-blue-500":""} flex items-center justify-between cursor-pointer`,onClick:()=>{n||(j(!k),N(""),E(-1))},children:[o.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[p&&o.jsx(p,{className:"h-4 w-4 mr-2 "+(i?"text-red-500":"text-gray-400")}),o.jsx("div",{className:"flex-1 truncate",children:d&&$.length>0?o.jsxs("div",{className:"flex flex-wrap gap-1",children:[$.slice(0,2).map(e=>{const r=t.find(t=>t.value===e);return o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:[r?.label||e,o.jsx("button",{type:"button",onClick:t=>((e,t)=>{if(t.stopPropagation(),d){const t=$.filter(t=>t!==e);s?.(t)}})(e,t),className:"ml-1 hover:text-blue-600 dark:hover:text-blue-200",children:"×"})]},e)}),$.length>2&&o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",children:["+",$.length-2," more"]})]}):o.jsx("span",{className:L?"text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400",children:(()=>{if(d){if(0===$.length)return a;if(1===$.length){const e=t.find(e=>e.value===$[0]);return e?.label||$[0]}return`${$.length} selected`}return L?.label||a})()})})]}),r&&!n&&!d&&o.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),s?.(d?[]:"")},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-600 rounded mr-1",children:"×"}),o.jsx("div",{className:"flex items-center space-x-1",children:!n&&o.jsx("div",{className:"text-gray-400",children:k?o.jsx(b,{size:16}):o.jsx(g,{size:16})})})]}),i&&o.jsxs("div",{className:"flex items-center mt-1.5 space-x-1 text-red-600 dark:text-red-400",children:[o.jsx(x,{size:14}),o.jsx("span",{className:"text-xs",children:i})]}),k&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto animate-fade-in",children:[l&&o.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:o.jsxs("div",{className:"relative",children:[o.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{ref:S,type:"text",value:w,onChange:e=>{N(e.target.value),E(-1)},placeholder:"Search options...",className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),o.jsx("div",{className:"py-1",children:0===C.length?o.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center",children:w?"No options found":"No options available"}):C.map((e,t)=>{const s=(a=e.value,d?$.includes(a):r===a);var a;const n=t===R;return o.jsxs("div",{ref:e=>M.current[t]=e,className:`px-4 py-2 text-sm cursor-pointer transition-colors duration-150 ${e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed bg-gray-50 dark:bg-gray-800":""+(n?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700")} ${s&&!e.disabled?"bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-medium":""}`,onClick:()=>z(e),onMouseEnter:()=>E(t),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"truncate",children:e.label}),s&&!e.disabled&&o.jsx(f,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 flex-shrink-0 ml-2"})]}),e.description&&o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.description})]},e.value)})}),d&&$.length>0&&o.jsx("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50",children:o.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[$.length," option",1!==$.length?"s":""," selected"]})})]})]})};y.propTypes={};export{y as S,p as u};
