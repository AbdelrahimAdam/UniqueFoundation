var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(a,r,l)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[r]=l,d=(e,a)=>{for(var r in a||(a={}))s.call(a,r)&&i(e,r,a[r]);if(l)for(var r of l(a))t.call(a,r)&&i(e,r,a[r]);return e},n=(e,a)=>{var r={};for(var i in e)s.call(e,i)&&a.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&l)for(var i of l(e))a.indexOf(i)<0&&t.call(e,i)&&(r[i]=e[i]);return r};import{k as o,j as c,e as u,a2 as x,r as m,f as g,a3 as b,V as h,X as p,A as v,x as y,p as f,C as j,U as k,G as N,q as w,F as S,m as D,D as M,a4 as V,s as L}from"./vendor-react-b59152ff.js";import{u as G}from"./index-cde8ec3e.js";import{B as q}from"./Button-d86c7bdc.js";import{S as C}from"./Select-30c0a963.js";import{r as E}from"./recordingService-f09f52a5.js";const z=o.forwardRef((e,a)=>{var r=e,{label:l,type:s="text",placeholder:t,error:i,disabled:o,icon:u,suffix:x,required:m,autoFocus:g=!1}=r,b=n(r,["label","type","placeholder","error","disabled","icon","suffix","required","autoFocus"]);return c.jsxs("div",{className:"space-y-2",children:[l&&c.jsxs("label",{className:"block text-sm font-medium "+(i?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:[l,m&&c.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c.jsxs("div",{className:"relative",children:[u&&c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(u,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",d({type:s,className:`w-full px-4 py-3 border ${i?"border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"} rounded-2xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 ${o?"opacity-50 cursor-not-allowed":""} ${u?"pl-10":""} ${x?"pr-16":""}`,placeholder:t,disabled:o,ref:a,autoFocus:g},b)),x&&c.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:c.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:x})})]}),i&&c.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:i})]})}),R=o.forwardRef((e,a)=>{var r=e,{label:l,placeholder:s,error:t,disabled:i,rows:o=3,required:u,autoFocus:x=!1}=r,m=n(r,["label","placeholder","error","disabled","rows","required","autoFocus"]);return c.jsxs("div",{className:"space-y-2",children:[l&&c.jsxs("label",{className:"block text-sm font-medium "+(t?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:[l,u&&c.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c.jsx("textarea",d({rows:o,className:`w-full px-4 py-3 border ${t?"border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"} rounded-2xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 resize-none ${i?"opacity-50 cursor-not-allowed":""}`,placeholder:s,disabled:i,ref:a,autoFocus:x},m)),t&&c.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:t})]})}),I=({onClose:e,onSuccess:l,sessionId:s=null,initialData:t={}})=>{var i,n,o,I,F,U,P,A,_,$,B,O,T,Q;u();const{user:H}=G(),W=x(),[Y,J]=m.useState(!1),[K,Z]=m.useState(""),[X,ee]=m.useState(""),[ae,re]=m.useState([]),[le,se]=m.useState(!1),[te,ie]=m.useState(0),[de,ne]=m.useState(null),[oe,ce]=m.useState(""),[ue,xe]=m.useState(0),me=m.useRef(null),ge=m.useRef(null),be=m.useRef(null),{register:he,handleSubmit:pe,formState:{errors:ve,isDirty:ye,isValid:fe},watch:je,setValue:ke,reset:Ne,trigger:we}=g({mode:"onChange",defaultValues:d({title:t.title||"",description:t.description||"",sessionId:s||t.sessionId||"",meetLink:t.meetLink||"",recordingUrl:t.recordingUrl||"",duration:t.duration||0,fileSize:t.fileSize||0,quality:t.quality||"720p",visibility:t.visibility||"private",category:t.category||"english",tags:Array.isArray(t.tags)?t.tags.join(", "):t.tags||"",instructorEmail:(null==H?void 0:H.email)||"",instructorName:(null==H?void 0:H.displayName)||""},t)}),Se=je(),De=m.useCallback(e=>{var a;const r=ae.find(a=>a.id===e);ne(r),r&&(ke("title",r.title||`Recording - ${null==(a=r.scheduledTime)?void 0:a.toLocaleDateString()}`,{shouldValidate:!0}),ke("meetLink",r.meetLink,{shouldValidate:!0}),ke("instructorEmail",r.instructorEmail,{shouldValidate:!0}),ke("sessionId",e,{shouldValidate:!0}),ke("category",r.category||"english",{shouldValidate:!0}),setTimeout(()=>{me.current&&me.current.focus()},100))},[ae,ke]),Me=m.useCallback(e=>{const a=parseInt(e)||0;if(ke("duration",a,{shouldValidate:!0}),a>0){const e={"360p":50,"480p":100,"720p":250,"1080p":500,"4k":1e3}[Se.quality]||250,r=Math.round(a/60*e);ke("fileSize",r,{shouldValidate:!0})}},[ke,Se.quality]),Ve=m.useCallback(e=>{ke("quality",e,{shouldValidate:!0}),Se.duration&&Me(Se.duration)},[ke,Se.duration,Me]),Le=m.useCallback(e=>{ke("category",e,{shouldValidate:!0})},[ke]),Ge=m.useCallback(e=>{ke("visibility",e,{shouldValidate:!0})},[ke]);m.useEffect(()=>{qe()},[]),m.useEffect(()=>{if(s&&ae.length>0){const e=ae.find(e=>e.id===s);ne(e),e&&(ke("title",e.title||e.topic,{shouldValidate:!0}),ke("meetLink",e.meetLink,{shouldValidate:!0}),ke("instructorEmail",e.instructorEmail,{shouldValidate:!0}),ke("category",e.category||"english",{shouldValidate:!0}))}},[s,ae,ke]),m.useEffect(()=>{Se.recordingUrl?Ce(Se.recordingUrl):ce("")},[Se.recordingUrl]),m.useEffect(()=>{oe.isValid&&(Se.duration&&0!==Se.duration||ke("duration",60,{shouldValidate:!0}),Se.duration>0&&Me(Se.duration))},[oe.isValid,Se.duration,Se.quality,ke,Me]);const qe=async()=>{try{se(!0),Z("");const e=await E.getSessionsForRecordingManagement(H.uid);re(e),0!==e.length||s||Z("No Google Meet sessions found. You can still create a recording without a session.")}catch(e){Z("Failed to load Google Meet sessions. You can still create a recording manually.")}finally{se(!1)}},Ce=e=>{try{if(E.recordingWorkflow.validateDriveUrl(e)){const a=E.extractDriveFileId(e),r=`https://drive.google.com/uc?export=view&id=${a}`,l=`https://drive.google.com/uc?export=download&id=${a}`;ce({isValid:!0,fileId:a,previewUrl:r,downloadUrl:l,viewUrl:`https://drive.google.com/file/d/${a}/view`,type:"google_drive"})}else ce({isValid:!1,error:"Please enter a valid Google Drive link (should start with https://drive.google.com/file/d/)"})}catch(a){ce({isValid:!1,error:"Invalid URL format"})}},Ee=async e=>{try{const r=(a=e.tags)?Array.isArray(a)?a:"string"==typeof a?a.split(",").map(e=>e.trim()).filter(Boolean):[]:[],l={title:e.title,description:e.description,meetLink:e.meetLink||"",recordingUrl:e.recordingUrl,duration:parseInt(e.duration)||0,fileSize:parseInt(e.fileSize)||0,quality:e.quality,visibility:e.visibility,category:e.category,tags:r,instructorId:H.uid,instructorEmail:H.email,instructorName:H.displayName||H.email,status:"recorded",recordingStatus:"available",isPublished:"public"===e.visibility,recordingAvailableFrom:new Date,courseId:"general"};return e.sessionId&&(l.sessionId=e.sessionId),await E.createRecording(l)}catch(r){throw new Error(r.message||"Failed to create recording")}var a},ze=b(e=>Ee(e),{onSuccess:a=>{W.invalidateQueries(["recordings"]),W.invalidateQueries(["sessions"]),W.invalidateQueries(["teacherRecordings"]),W.invalidateQueries(["studentRecordings"]),W.invalidateQueries(["instructorMeetRecordings"]),ee("Recording saved successfully! Students can now access the Google Drive link."),J(!1),setTimeout(()=>{null==l||l(a),e()},2e3)},onError:e=>{Z(e.message||"Failed to save recording. Please try again."),J(!1),ie(0)}}),Re=e=>{if(!e)return"0 MB";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["B","KB","MB","GB"][a]},Ie=m.useMemo(()=>[{value:"english",label:"English"},{value:"english_literature",label:"English Literature"},{value:"english_language",label:"English Language"},{value:"communications",label:"Communications"},{value:"general",label:"General Session"},{value:"mathematics",label:"Mathematics"},{value:"algebra",label:"Algebra"},{value:"geometry",label:"Geometry"},{value:"calculus",label:"Calculus"},{value:"statistics",label:"Statistics"},{value:"trigonometry",label:"Trigonometry"},{value:"physics",label:"Physics"},{value:"chemistry",label:"Chemistry"},{value:"biology",label:"Biology"},{value:"environmental_science",label:"Environmental Science"},{value:"earth_science",label:"Earth Science"},{value:"history",label:"History"},{value:"geography",label:"Geography"},{value:"civics",label:"Civics"},{value:"economics",label:"Economics"},{value:"political_science",label:"Political Science"},{value:"spanish",label:"Spanish"},{value:"french",label:"French"},{value:"german",label:"German"},{value:"mandarin",label:"Mandarin Chinese"},{value:"japanese",label:"Japanese"},{value:"art",label:"Art"},{value:"music",label:"Music"},{value:"drama",label:"Drama"},{value:"philosophy",label:"Philosophy"},{value:"computer_science",label:"Computer Science"},{value:"programming",label:"Programming"},{value:"web_development",label:"Web Development"},{value:"data_science",label:"Data Science"},{value:"business_studies",label:"Business Studies"},{value:"accounting",label:"Accounting"},{value:"marketing",label:"Marketing"},{value:"physical_education",label:"Physical Education"},{value:"health_education",label:"Health Education"},{value:"career_guidance",label:"Career Guidance"}],[]),Fe=m.useMemo(()=>[{value:"360p",label:"360p - Mobile (Low Quality)"},{value:"480p",label:"480p - Standard Definition"},{value:"720p",label:"720p - High Definition"},{value:"1080p",label:"1080p - Full HD"},{value:"4k",label:"4K - Ultra HD"}],[]),Ue=m.useMemo(()=>[{value:"private",label:"Private - Only me"},{value:"unlisted",label:"Unlisted - Anyone with link"},{value:"public",label:"Public - Visible to all students"}],[]),Pe=m.useMemo(()=>()=>c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mb-6",children:[c.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-3",children:"Google Meet Recording Workflow"}),c.jsx("div",{className:"space-y-2",children:E.recordingWorkflow.getRecordingSteps().map((e,a)=>c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium "+(a<=ue?"bg-blue-500 text-white":"bg-blue-200 dark:bg-blue-800 text-blue-600 dark:text-blue-400"),children:a+1}),c.jsx("p",{className:"text-sm "+(a<=ue?"text-blue-800 dark:text-blue-200":"text-blue-600 dark:text-blue-400"),children:e})]},a))})]}),[ue]);return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto transform transition-all duration-300 scale-100",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 rounded-t-2xl",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:c.jsx(h,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Add Recording"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Link your Google Drive recording (session is optional)"})]})]}),c.jsx("button",{onClick:e,disabled:Y,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:c.jsx(p,{size:24})})]}),Y&&c.jsxs("div",{className:"px-6 pt-4",children:[c.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${te}%`}})}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 text-center",children:te<100?"Saving recording to database...":"Recording saved successfully!"})]}),K&&c.jsxs("div",{className:"mx-6 mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start space-x-3 animate-slide-down",children:[c.jsx(v,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm flex-1",children:K}),c.jsx("button",{onClick:()=>Z(""),className:"text-red-500 hover:text-red-700 flex-shrink-0",children:c.jsx(p,{size:16})})]}),X&&c.jsxs("div",{className:"mx-6 mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl flex items-start space-x-3 animate-slide-down",children:[c.jsx(y,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm flex-1",children:X})]}),c.jsx("div",{className:"px-6 pt-4",children:c.jsx(Pe,{})}),c.jsxs("form",{onSubmit:pe(async e=>{try{Z(""),ee(""),J(!0);const a=(()=>{ie(0);const e=setInterval(()=>{ie(a=>a>=90?(clearInterval(e),90):a+10)},200);return e})();if(!e.recordingUrl)throw new Error("Google Drive link is required");if(!oe.isValid)throw new Error("Please enter a valid Google Drive link");if(!e.title.trim())throw new Error("Recording title is required");e.meetLink||(e.meetLink="");const r=await ze.mutateAsync(e);return clearInterval(a),ie(100),r}catch(a){Z(a.message||"Failed to save recording. Please try again."),J(!1),ie(0)}}),className:"p-6 space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white",children:"Link to Google Meet Session (Optional)"}),le?c.jsxs("div",{className:"flex items-center justify-center py-4",children:[c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),c.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Loading Google Meet sessions..."})]}):0!==ae.length||s?c.jsx(C,{options:ae.map(e=>{var a;return{value:e.id,label:`${e.title} - ${null==(a=e.scheduledTime)?void 0:a.toLocaleDateString()}`,disabled:"available"===e.recordingStatus}}),value:Se.sessionId,onChange:De,placeholder:"Select a Google Meet session (optional)...",disabled:Y||!!s,error:null==(i=ve.sessionId)?void 0:i.message}):c.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:c.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"No Google Meet sessions found. You can create a standalone recording without linking to a session."})}),de&&c.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(f,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:de.title}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm text-blue-700 dark:text-blue-300",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(f,{className:"h-4 w-4"}),c.jsx("span",{children:null==(n=de.scheduledTime)?void 0:n.toLocaleDateString()})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(j,{className:"h-4 w-4"}),c.jsx("span",{children:null==(o=de.scheduledTime)?void 0:o.toLocaleTimeString()})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(k,{className:"h-4 w-4"}),c.jsx("span",{children:de.instructorName})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(N,{className:"h-4 w-4"}),c.jsx("span",{className:"capitalize",children:de.status})]})]}),de.meetLink&&c.jsx("div",{className:"mt-2",children:c.jsxs("a",{href:de.meetLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[c.jsx(w,{size:14}),c.jsx("span",{children:"Join Google Meet"})]})})]})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx("div",{className:"lg:col-span-2",children:c.jsx(z,d({label:"Recording Title *",type:"text",placeholder:"Enter recording title...",error:null==(I=ve.title)?void 0:I.message,disabled:Y,required:!0,icon:S,autoFocus:!de,ref:me},he("title",{required:"Recording title is required",minLength:{value:3,message:"Title must be at least 3 characters"},maxLength:{value:100,message:"Title cannot exceed 100 characters"}})))}),c.jsx("div",{className:"lg:col-span-2",children:c.jsx(R,d({label:"Description",rows:3,placeholder:"Describe the recording content...",error:null==(F=ve.description)?void 0:F.message,disabled:Y,ref:ge},he("description",{maxLength:{value:500,message:"Description cannot exceed 500 characters"}})))}),c.jsx("div",{children:c.jsx(z,d({label:"Google Meet Link (Optional)",type:"url",placeholder:"https://meet.google.com/...",error:null==(U=ve.meetLink)?void 0:U.message,disabled:Y||!!de,icon:h},he("meetLink",{pattern:{value:/https:\/\/meet\.google\.com\/[a-z-]+/,message:"Please enter a valid Google Meet link"}})))}),c.jsx(C,{label:"Subject *",options:Ie,value:Se.category,onChange:Le,disabled:Y,error:null==(P=ve.category)?void 0:P.message,icon:D}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx(z,d({label:"Google Drive Recording Link *",type:"url",placeholder:"https://drive.google.com/file/d/...",error:(null==(A=ve.recordingUrl)?void 0:A.message)||oe.error&&!oe.isValid,disabled:Y,icon:M,required:!0,ref:be,autoFocus:!!de},he("recordingUrl",{required:"Google Drive link is required",pattern:{value:/https:\/\/drive\.google\.com\/(file\/d\/|open\?id=)([a-zA-Z0-9_-]+)/,message:"Please enter a valid Google Drive link"}}))),oe.isValid&&c.jsx("div",{className:"mt-3 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(y,{className:"h-5 w-5 text-green-500"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Valid Google Drive Link"}),c.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["File ID: ",oe.fileId]})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("a",{href:oe.viewUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 px-3 py-1 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors",children:[c.jsx(V,{size:14}),c.jsx("span",{children:"View"})]}),c.jsxs("a",{href:oe.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 px-3 py-1 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-colors",children:[c.jsx(M,{size:14}),c.jsx("span",{children:"Download"})]})]})]})}),oe.error&&!oe.isValid&&Se.recordingUrl&&c.jsx("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(v,{className:"h-4 w-4 text-red-500"}),c.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:oe.error})]})}),c.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[c.jsx("strong",{children:"How to get your Google Drive link:"}),c.jsx("br",{}),"1. Go to drive.google.com",c.jsx("br",{}),'2. Find your recording in "Meet Recordings" folder',c.jsx("br",{}),'3. Right-click → "Share" → "Copy link"',c.jsx("br",{}),"4. Paste the link above"]})})]}),c.jsx("div",{children:c.jsx(z,(Ae=d({label:"Duration (minutes) *",type:"number",placeholder:"Duration in minutes",min:"1",max:"480",error:null==(_=ve.duration)?void 0:_.message,disabled:Y,suffix:"minutes",icon:j},he("duration",{required:"Duration is required",min:{value:1,message:"Duration must be at least 1 minute"},max:{value:480,message:"Duration cannot exceed 8 hours"}})),_e={onChange:e=>Me(e.target.value)},a(Ae,r(_e))))}),c.jsx(C,{label:"Quality",options:Fe,value:Se.quality,onChange:Ve,disabled:Y,error:null==($=ve.quality)?void 0:$.message}),c.jsxs("div",{children:[c.jsx(z,d({label:"File Size (MB)",type:"number",placeholder:"File size in MB",min:"0",error:null==(B=ve.fileSize)?void 0:B.message,disabled:!0,suffix:"MB"},he("fileSize"))),Se.fileSize>0&&c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[Re(1024*Se.fileSize*1024)," • Auto-calculated"]})]}),c.jsx(C,{label:"Visibility *",options:Ue,value:Se.visibility,onChange:Ge,disabled:Y,error:null==(O=ve.visibility)?void 0:O.message})]}),c.jsxs("div",{children:[c.jsx(z,d({label:"Tags",type:"text",placeholder:"math, algebra, lecture (comma separated)",error:null==(T=ve.tags)?void 0:T.message,disabled:Y},he("tags",{validate:e=>{if(!e)return!0;const a="string"==typeof e?e.split(",").map(e=>e.trim()).filter(Boolean):Array.isArray(e)?e:[];return a.length>10?"Maximum 10 tags allowed":!a.some(e=>e.length>20)||"Each tag must be less than 20 characters"}}))),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Add relevant tags to help students find this recording"})]}),(Se.duration>0||Se.fileSize>0)&&c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[c.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Recording Summary"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Se.duration>0&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(j,{className:"h-4 w-4 text-gray-400"}),c.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Duration: ",(e=>{if(!e)return"0:00";const a=Math.floor(e/60),r=Math.floor(e%60);return a>0?`${a}:${r.toString().padStart(2,"0")}:00`:`${r}:00`})(Se.duration)]})]}),Se.fileSize>0&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(L,{className:"h-4 w-4 text-gray-400"}),c.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Size: ",Re(1024*Se.fileSize*1024)]})]}),Se.quality&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(h,{className:"h-4 w-4 text-gray-400"}),c.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Quality: ",Se.quality.toUpperCase()]})]}),Se.category&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(D,{className:"h-4 w-4 text-gray-400"}),c.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Subject: ",null==(Q=Ie.find(e=>e.value===Se.category))?void 0:Q.label]})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsx(q,{type:"button",variant:"outline",onClick:e,disabled:Y,className:"w-full sm:w-auto",children:"Cancel"}),c.jsx(q,{type:"submit",disabled:Y||!ye||!fe||!oe.isValid,loading:Y,className:"w-full sm:w-auto bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",icon:L,children:Y?"Saving...":"Save Recording"})]})]})]})});var Ae,_e};export{I as C};
