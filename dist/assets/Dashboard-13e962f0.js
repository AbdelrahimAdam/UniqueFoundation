import{u as e,j as s,L as t}from"./index-5767ddf8.js";import{r}from"./vendor-0a74ad82.js";import{r as a}from"./recordingService-a3f82448.js";import{s as i}from"./sessionService-6e8a4b4a.js";import{B as o}from"./Button-3bd6c448.js";import{u as c}from"./useTranslation-aa9b7537.js";import{V as n}from"./video-9bd5ab91.js";import{U as l}from"./users-499efd4b.js";import{B as d}from"./bar-chart-3-fea753ae.js";import{C as g}from"./clock-7df3ab35.js";import{P as m}from"./plus-0f0e053e.js";import{R as h}from"./refresh-cw-c53519ba.js";import{T as x}from"./trending-up-3b4b82f0.js";import{C as p}from"./calendar-db1a81dc.js";import{B as u}from"./book-open-cf5b879f.js";import"./router-80e9042b.js";import"./firebase-383b8577.js";const b=()=>{const{t:b}=c(),{user:j,userProfile:y}=e(),[f,w]=r.useState({totalRecordings:0,published:0,inProgress:0,totalViews:0}),[v,N]=r.useState([]),[k,S]=r.useState(!0),R=j?.uid;r.useEffect(()=>{R&&P()},[R]);const P=async()=>{try{S(!0);const[e,s]=await Promise.all([a.getAllRecordings(),i.getAllSessions({limit:5})]),t=e.filter(e=>e.teacherId===R||e.createdBy===R),r=s.filter(e=>e.createdBy===R||e.teacherId===R);w({totalRecordings:t.length,published:t.filter(e=>e.isPublished).length,inProgress:t.filter(e=>"recording"===e.status||"processing"===e.status).length,totalViews:t.reduce((e,s)=>e+(s.views||0),0)}),N(r)}catch(e){}finally{S(!1)}},T=[{name:b("teacher.stats.totalRecordings","Total Recordings"),value:f.totalRecordings.toString(),icon:n,change:`${f.published} published`,changeType:"positive",color:"from-blue-500 to-cyan-500"},{name:b("teacher.stats.published","Published"),value:f.published.toString(),icon:l,change:`${Math.round(f.published/Math.max(f.totalRecordings,1)*100)}% of total`,changeType:"positive",color:"from-green-500 to-emerald-500"},{name:b("teacher.stats.totalViews","Total Views"),value:f.totalViews.toString(),icon:d,change:"+12% this week",changeType:"positive",color:"from-purple-500 to-pink-500"},{name:b("teacher.stats.inProgress","In Progress"),value:f.inProgress.toString(),icon:g,change:"Active recordings",changeType:f.inProgress>0?"warning":"neutral",color:"from-orange-500 to-red-500"}],V=[{title:b("recording.createNew","Create Recording"),description:"Start a new recording session",icon:m,action:()=>window.location.href="/teacher/recordings/create"},{title:b("teacher.actions.manageStudents","Manage Students"),description:"View and manage your students",icon:l,action:()=>window.location.href="/teacher/students"},{title:b("teacher.actions.viewAnalytics","View Analytics"),description:"Detailed performance insights",icon:d,action:()=>window.location.href="/teacher/analytics"}];return k?s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx(t,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:b("teacher.dashboard.title","Teacher Dashboard")}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",y?.displayName||"Teacher"]})]}),s.jsxs(o,{onClick:P,variant:"outline",children:[s.jsx(h,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map((e,t)=>{const r=e.icon;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-br ${e.color}`,children:s.jsx(r,{className:"h-6 w-6 text-white"})}),"positive"===e.changeType&&s.jsx(x,{className:"h-5 w-5 text-green-500"})]}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:e.value}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.change})]},e.name)})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 space-y-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:V.map((e,t)=>{const r=e.icon;return s.jsxs("button",{onClick:e.action,className:"p-4 text-left rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700 transition-colors duration-200",children:[s.jsx(r,{className:"h-6 w-6 text-blue-500 mb-2"}),s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description})]},e.title)})})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Sessions"}),s.jsx(p,{className:"h-5 w-5 text-gray-400"})]}),s.jsx("div",{className:"space-y-3",children:v.length>0?v.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.topic}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.date?.toLocaleDateString()})]}),s.jsx("div",{className:"w-2 h-2 rounded-full "+("completed"===e.status?"bg-green-500":"live"===e.status?"bg-red-500":"bg-blue-500")})]},e.id)):s.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[s.jsx(u,{className:"mx-auto h-8 w-8 mb-2"}),s.jsx("p",{children:"No recent sessions"})]})})]})]})]})};export{b as default};
