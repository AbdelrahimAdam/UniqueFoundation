import{j as e,u as a,o as r}from"./index-ce15b861.js";import{c as s,r as t}from"./vendor-0a74ad82.js";import{u as l}from"./index.esm-e04fd8e7.js";import{u as i,S as o}from"./Select-3566718e.js";import{B as d}from"./Button-fb358952.js";import{r as n}from"./recordingService-dfe80829.js";import{u as c}from"./useTranslation-9d3f62b5.js";import{V as u}from"./video-63348c6e.js";import{X as m}from"./x-b8d49cff.js";import{A as x}from"./alert-circle-354385f5.js";import{C as g}from"./check-circle-dac5ac57.js";import{C as b}from"./calendar-9dea7464.js";import{C as h}from"./clock-5d166213.js";import{U as p}from"./user-1dea5926.js";import{G as v,U as y}from"./upload-a712be01.js";import{L as f}from"./link-91bf4f7a.js";import{F as j}from"./file-text-fe19bc5b.js";import{B as k}from"./book-open-4dbb8b42.js";import{D as N}from"./download-0e098eb5.js";import{E as w}from"./external-link-492650bf.js";const S=s.forwardRef(({label:a,type:r="text",placeholder:s,error:t,disabled:l,icon:i,suffix:o,required:d,autoFocus:n=!1,inputMode:c,...u},m)=>e.jsxs("div",{className:"space-y-2",children:[a&&e.jsxs("label",{className:"block text-sm font-medium "+(t?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:[a,d&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[i&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(i,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:r,inputMode:c,className:`w-full px-4 py-3 border ${t?"border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"} rounded-2xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 ${l?"opacity-50 cursor-not-allowed":""} ${i?"pl-10":""} ${o?"pr-16":""}`,placeholder:s,disabled:l,ref:m,autoFocus:n,...u}),o&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:o})})]}),t&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:t})]})),M=s.forwardRef(({label:a,placeholder:r,error:s,disabled:t,rows:l=3,required:i,autoFocus:o=!1,...d},n)=>e.jsxs("div",{className:"space-y-2",children:[a&&e.jsxs("label",{className:"block text-sm font-medium "+(s?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:[a,i&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{rows:l,className:`w-full px-4 py-3 border ${s?"border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"} rounded-2xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 resize-none ${t?"opacity-50 cursor-not-allowed":""}`,placeholder:r,disabled:t,ref:n,autoFocus:o,...d}),s&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:s})]})),L=({onClose:s,onSuccess:L,sessionId:D=null,initialData:C={}})=>{c();const{user:z}=a(),V=r(),[E,G]=t.useState(!1),[A,q]=t.useState(""),[U,R]=t.useState(""),[I,_]=t.useState([]),[F,$]=t.useState(!1),[T,B]=t.useState(0),[P,Q]=t.useState(null),[H,Z]=t.useState(""),[O,W]=t.useState(0),J=t.useRef(null),K=t.useRef(null),Y=t.useRef(null),X=t.useCallback(e=>{if(!e)return"";let a=e.trim();a=a.replace(/\s+/g,"");const r=(e=>{const a=e.match(/drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/),r=e.match(/drive\.google\.com\/open\?id=([a-zA-Z0-9_-]+)/),s=e.match(/^[a-zA-Z0-9_-]+$/);return a?a[1]:r?r[1]:s?s[0]:null})(a);return r?`https://drive.google.com/file/d/${r}/view`:a},[]),{register:ee,handleSubmit:ae,formState:{errors:re,isDirty:se,isValid:te},watch:le,setValue:ie,reset:oe,trigger:de}=l({mode:"onChange",defaultValues:{title:C.title||"",description:C.description||"",sessionId:D||C.sessionId||"",meetLink:C.meetLink||"",recordingUrl:C.recordingUrl||"",duration:C.duration||0,fileSize:C.fileSize||0,quality:C.quality||"720p",visibility:C.visibility||"private",category:C.category||"english",tags:Array.isArray(C.tags)?C.tags.join(", "):C.tags||"",instructorEmail:z?.email||"",instructorName:z?.displayName||"",...C}}),ne=le(),ce=t.useCallback(e=>{const a=I.find(a=>a.id===e);Q(a),a&&(ie("title",a.title||`Recording - ${a.scheduledTime?.toLocaleDateString()}`,{shouldValidate:!0}),ie("meetLink",a.meetLink,{shouldValidate:!0}),ie("instructorEmail",a.instructorEmail,{shouldValidate:!0}),ie("sessionId",e,{shouldValidate:!0}),ie("category",a.category||"english",{shouldValidate:!0}),setTimeout(()=>{J.current&&J.current.focus()},100))},[I,ie]),ue=t.useCallback(e=>{const a=parseInt(e)||0;if(ie("duration",a,{shouldValidate:!0}),a>0){const e={"360p":50,"480p":100,"720p":250,"1080p":500,"4k":1e3}[ne.quality]||250,r=Math.round(a/60*e);ie("fileSize",r,{shouldValidate:!0})}},[ie,ne.quality]),me=t.useCallback(e=>{ie("quality",e,{shouldValidate:!0}),ne.duration&&ue(ne.duration)},[ie,ne.duration,ue]),xe=t.useCallback(e=>{ie("category",e,{shouldValidate:!0})},[ie]),ge=t.useCallback(e=>{ie("visibility",e,{shouldValidate:!0})},[ie]);t.useEffect(()=>{be()},[]),t.useEffect(()=>{if(D&&I.length>0){const e=I.find(e=>e.id===D);Q(e),e&&(ie("title",e.title||e.topic,{shouldValidate:!0}),ie("meetLink",e.meetLink,{shouldValidate:!0}),ie("instructorEmail",e.instructorEmail,{shouldValidate:!0}),ie("category",e.category||"english",{shouldValidate:!0}))}},[D,I,ie]),t.useEffect(()=>{ne.recordingUrl?he(ne.recordingUrl):Z("")},[ne.recordingUrl]),t.useEffect(()=>{H.isValid&&(ne.duration&&0!==ne.duration||ie("duration",60,{shouldValidate:!0}),ne.duration>0&&ue(ne.duration))},[H.isValid,ne.duration,ne.quality,ie,ue]);const be=async()=>{try{$(!0),q("");const e=await n.getSessionsForRecordingManagement(z.uid);_(e),0!==e.length||D||q("No Google Meet sessions found. You can still create a recording without a session.")}catch(e){q("Failed to load Google Meet sessions. You can still create a recording manually.")}finally{$(!1)}},he=e=>{try{if(!e||""===e.trim())return void Z({isValid:!0,previewText:"Enter a Google Drive link"});const a=(e=>{const a=e.match(/drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/),r=e.match(/drive\.google\.com\/open\?id=([a-zA-Z0-9_-]+)/),s=e.match(/^[a-zA-Z0-9_-]{25,}$/);return a?a[1]:r?r[1]:s?s[0]:null})(e);if(a){const e=`https://drive.google.com/uc?export=view&id=${a}`,r=`https://drive.google.com/uc?export=download&id=${a}`;Z({isValid:!0,fileId:a,previewUrl:e,downloadUrl:r,viewUrl:`https://drive.google.com/file/d/${a}/view`,type:"google_drive"})}else Z({isValid:!0,previewText:"Link accepted - will be saved as provided",viewUrl:e})}catch(a){Z({isValid:!0,previewText:"Link accepted - will be saved as provided",viewUrl:ne.recordingUrl})}},pe=async e=>{try{const r=(a=e.tags)?Array.isArray(a)?a:"string"==typeof a?a.split(",").map(e=>e.trim()).filter(Boolean):[]:[],s=X(e.recordingUrl),t={title:e.title,description:e.description,meetLink:e.meetLink||"",recordingUrl:s,duration:parseInt(e.duration)||0,fileSize:parseInt(e.fileSize)||0,quality:e.quality,visibility:e.visibility,category:e.category,tags:r,instructorId:z.uid,instructorEmail:z.email,instructorName:z.displayName||z.email,status:"recorded",recordingStatus:"available",isPublished:"public"===e.visibility,recordingAvailableFrom:new Date,courseId:"general"};return e.sessionId&&(t.sessionId=e.sessionId),await n.createRecording(t)}catch(r){throw new Error(r.message||"Failed to create recording")}var a},ve=i(e=>pe(e),{onSuccess:e=>{V.invalidateQueries(["recordings"]),V.invalidateQueries(["sessions"]),V.invalidateQueries(["teacherRecordings"]),V.invalidateQueries(["studentRecordings"]),V.invalidateQueries(["instructorMeetRecordings"]),R("Recording saved successfully! Students can now access the Google Drive link."),G(!1),setTimeout(()=>{L?.(e),s()},2e3)},onError:e=>{q(e.message||"Failed to save recording. Please try again."),G(!1),B(0)}}),ye=e=>{if(!e)return"0 MB";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["B","KB","MB","GB"][a]},fe=t.useMemo(()=>[{value:"english",label:"English"},{value:"english_literature",label:"English Literature"},{value:"english_language",label:"English Language"},{value:"communications",label:"Communications"},{value:"general",label:"General Session"},{value:"mathematics",label:"Mathematics"},{value:"algebra",label:"Algebra"},{value:"geometry",label:"Geometry"},{value:"calculus",label:"Calculus"},{value:"statistics",label:"Statistics"},{value:"trigonometry",label:"Trigonometry"},{value:"physics",label:"Physics"},{value:"chemistry",label:"Chemistry"},{value:"biology",label:"Biology"},{value:"environmental_science",label:"Environmental Science"},{value:"earth_science",label:"Earth Science"},{value:"history",label:"History"},{value:"geography",label:"Geography"},{value:"civics",label:"Civics"},{value:"economics",label:"Economics"},{value:"political_science",label:"Political Science"},{value:"spanish",label:"Spanish"},{value:"french",label:"French"},{value:"german",label:"German"},{value:"mandarin",label:"Mandarin Chinese"},{value:"japanese",label:"Japanese"},{value:"art",label:"Art"},{value:"music",label:"Music"},{value:"drama",label:"Drama"},{value:"philosophy",label:"Philosophy"},{value:"computer_science",label:"Computer Science"},{value:"programming",label:"Programming"},{value:"web_development",label:"Web Development"},{value:"data_science",label:"Data Science"},{value:"business_studies",label:"Business Studies"},{value:"accounting",label:"Accounting"},{value:"marketing",label:"Marketing"},{value:"physical_education",label:"Physical Education"},{value:"health_education",label:"Health Education"},{value:"career_guidance",label:"Career Guidance"}],[]),je=t.useMemo(()=>[{value:"360p",label:"360p - Mobile (Low Quality)"},{value:"480p",label:"480p - Standard Definition"},{value:"720p",label:"720p - High Definition"},{value:"1080p",label:"1080p - Full HD"},{value:"4k",label:"4K - Ultra HD"}],[]),ke=t.useMemo(()=>[{value:"private",label:"Private - Only me"},{value:"unlisted",label:"Unlisted - Anyone with link"},{value:"public",label:"Public - Visible to all students"}],[]),Ne=t.useMemo(()=>()=>e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-3",children:"Google Meet Recording Workflow"}),e.jsx("div",{className:"space-y-2",children:n.recordingWorkflow.getRecordingSteps().map((a,r)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium "+(r<=O?"bg-blue-500 text-white":"bg-blue-200 dark:bg-blue-800 text-blue-600 dark:text-blue-400"),children:r+1}),e.jsx("p",{className:"text-sm "+(r<=O?"text-blue-800 dark:text-blue-200":"text-blue-600 dark:text-blue-400"),children:a})]},r))})]}),[O]);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto transform transition-all duration-300 scale-100",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(u,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Add Recording"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Link your Google Drive recording (session is optional)"})]})]}),e.jsx("button",{onClick:s,disabled:E,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(m,{size:24})})]}),E&&e.jsxs("div",{className:"px-6 pt-4",children:[e.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${T}%`}})}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 text-center",children:T<100?"Saving recording to database...":"Recording saved successfully!"})]}),A&&e.jsxs("div",{className:"mx-6 mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start space-x-3 animate-slide-down",children:[e.jsx(x,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm flex-1",children:A}),e.jsx("button",{onClick:()=>q(""),className:"text-red-500 hover:text-red-700 flex-shrink-0",children:e.jsx(m,{size:16})})]}),U&&e.jsxs("div",{className:"mx-6 mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl flex items-start space-x-3 animate-slide-down",children:[e.jsx(g,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm flex-1",children:U})]}),e.jsx("div",{className:"px-6 pt-4",children:e.jsx(Ne,{})}),e.jsxs("form",{onSubmit:ae(async e=>{try{q(""),R(""),G(!0);const a=(()=>{B(0);const e=setInterval(()=>{B(a=>a>=90?(clearInterval(e),90):a+10)},200);return e})();if(!e.recordingUrl)throw new Error("Google Drive link is required");if(!e.title.trim())throw new Error("Recording title is required");e.meetLink||(e.meetLink="");const r=await ve.mutateAsync(e);return clearInterval(a),B(100),r}catch(a){q(a.message||"Failed to save recording. Please try again."),G(!1),B(0)}}),className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white",children:"Link to Google Meet Session (Optional)"}),F?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Loading Google Meet sessions..."})]}):0!==I.length||D?e.jsx(o,{options:I.map(e=>({value:e.id,label:`${e.title} - ${e.scheduledTime?.toLocaleDateString()}`,disabled:"available"===e.recordingStatus})),value:ne.sessionId,onChange:ce,placeholder:"Select a Google Meet session (optional)...",disabled:E||!!D,error:re.sessionId?.message}):e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:e.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"No Google Meet sessions found. You can create a standalone recording without linking to a session."})}),P&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(b,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:P.title}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm text-blue-700 dark:text-blue-300",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:P.scheduledTime?.toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:P.scheduledTime?.toLocaleTimeString()})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:P.instructorName})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{className:"capitalize",children:P.status})]})]}),P.meetLink&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:P.meetLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[e.jsx(f,{size:14}),e.jsx("span",{children:"Join Google Meet"})]})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(S,{label:"Recording Title *",type:"text",placeholder:"Enter recording title...",error:re.title?.message,disabled:E,required:!0,icon:j,autoFocus:!P,ref:J,...ee("title",{required:"Recording title is required",minLength:{value:3,message:"Title must be at least 3 characters"},maxLength:{value:100,message:"Title cannot exceed 100 characters"}})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(M,{label:"Description",rows:3,placeholder:"Describe the recording content...",error:re.description?.message,disabled:E,ref:K,...ee("description",{maxLength:{value:500,message:"Description cannot exceed 500 characters"}})})}),e.jsxs("div",{children:[e.jsx(S,{label:"Google Meet Link (Optional)",type:"text",inputMode:"url",placeholder:"https://meet.google.com/...",error:re.meetLink?.message,disabled:E||!!P,icon:u,...ee("meetLink",{})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Paste any Google Meet link or leave empty"})]}),e.jsx(o,{label:"Subject *",options:fe,value:ne.category,onChange:xe,disabled:E,error:re.category?.message,icon:k}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx(S,{label:"Google Drive Recording Link *",type:"text",inputMode:"url",placeholder:"Paste any Google Drive link or file ID",error:re.recordingUrl?.message,disabled:E,icon:N,required:!0,ref:Y,autoFocus:!!P,...ee("recordingUrl",{required:"Google Drive link is required"})}),ne.recordingUrl&&e.jsx("div",{className:"mt-3 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(g,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Link Accepted"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:H.fileId?`File ID: ${H.fileId}`:"Will be saved as provided"})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("a",{href:H.viewUrl||ne.recordingUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 px-3 py-1 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors",children:[e.jsx(w,{size:14}),e.jsx("span",{children:"Test Link"})]})})]})}),e.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Any Google Drive link is accepted:"}),e.jsx("br",{}),e.jsx("strong",{children:"How to get your link:"}),e.jsx("br",{}),"1. Go to drive.google.com",e.jsx("br",{}),"2. Find your recording",e.jsx("br",{}),'3. Right-click → "Share" → "Copy link"',e.jsx("br",{}),"4. Paste above"]})})]}),e.jsx("div",{children:e.jsx(S,{label:"Duration (minutes) *",type:"number",placeholder:"Duration in minutes",min:"1",max:"480",error:re.duration?.message,disabled:E,suffix:"minutes",icon:h,...ee("duration",{required:"Duration is required",min:{value:1,message:"Duration must be at least 1 minute"},max:{value:480,message:"Duration cannot exceed 8 hours"}}),onChange:e=>ue(e.target.value)})}),e.jsx(o,{label:"Quality",options:je,value:ne.quality,onChange:me,disabled:E,error:re.quality?.message}),e.jsxs("div",{children:[e.jsx(S,{label:"File Size (MB)",type:"number",placeholder:"File size in MB",min:"0",error:re.fileSize?.message,disabled:!0,suffix:"MB",...ee("fileSize")}),ne.fileSize>0&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[ye(1024*ne.fileSize*1024)," • Auto-calculated"]})]}),e.jsx(o,{label:"Visibility *",options:ke,value:ne.visibility,onChange:ge,disabled:E,error:re.visibility?.message})]}),e.jsxs("div",{children:[e.jsx(S,{label:"Tags",type:"text",placeholder:"math, algebra, lecture (comma separated)",error:re.tags?.message,disabled:E,...ee("tags",{validate:e=>{if(!e)return!0;const a="string"==typeof e?e.split(",").map(e=>e.trim()).filter(Boolean):Array.isArray(e)?e:[];return a.length>10?"Maximum 10 tags allowed":!a.some(e=>e.length>20)||"Each tag must be less than 20 characters"}})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Add relevant tags to help students find this recording"})]}),(ne.duration>0||ne.fileSize>0)&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Recording Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[ne.duration>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Duration: ",(e=>{if(!e)return"0:00";const a=Math.floor(e/60),r=Math.floor(e%60);return a>0?`${a}:${r.toString().padStart(2,"0")}:00`:`${r}:00`})(ne.duration)]})]}),ne.fileSize>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Size: ",ye(1024*ne.fileSize*1024)]})]}),ne.quality&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Quality: ",ne.quality.toUpperCase()]})]}),ne.category&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Subject: ",fe.find(e=>e.value===ne.category)?.label]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(d,{type:"button",variant:"outline",onClick:s,disabled:E,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(d,{type:"submit",disabled:E||!se||!te,loading:E,className:"w-full sm:w-auto bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",icon:y,children:E?"Saving...":"Save Recording"})]})]})]})})};export{L as C};
