import{u as e,j as s,L as t}from"./index-4237eef3.js";import{r}from"./vendor-c3615fdd.js";import{r as a}from"./recordingService-94164aa2.js";import{s as i}from"./sessionService-b1a121b6.js";import{B as o}from"./Button-e12009ad.js";import{u as l}from"./useTranslation-d88888d0.js";import{V as n,b as c,c as d,C as g,P as h,R as m,T as x,d as u,B as b}from"./ui-e3d8d230.js";import"./router-4adec120.js";import"./firebase-9a5fb30d.js";import"./utils-5b9d0682.js";const p=()=>{const{t:p}=l(),{user:y,userProfile:j}=e(),[f,w]=r.useState({totalRecordings:0,published:0,inProgress:0,totalViews:0}),[v,N]=r.useState([]),[k,S]=r.useState(!0),P=null==y?void 0:y.uid;r.useEffect(()=>{P&&R()},[P]);const R=async()=>{try{S(!0);const[e,s]=await Promise.all([a.getAllRecordings(),i.getAllSessions({limit:5})]),t=e.filter(e=>e.teacherId===P||e.createdBy===P),r=s.filter(e=>e.createdBy===P||e.teacherId===P);w({totalRecordings:t.length,published:t.filter(e=>e.isPublished).length,inProgress:t.filter(e=>"recording"===e.status||"processing"===e.status).length,totalViews:t.reduce((e,s)=>e+(s.views||0),0)}),N(r)}catch(e){}finally{S(!1)}},T=[{name:p("teacher.stats.totalRecordings","Total Recordings"),value:f.totalRecordings.toString(),icon:n,change:`${f.published} published`,changeType:"positive",color:"from-blue-500 to-cyan-500"},{name:p("teacher.stats.published","Published"),value:f.published.toString(),icon:c,change:`${Math.round(f.published/Math.max(f.totalRecordings,1)*100)}% of total`,changeType:"positive",color:"from-green-500 to-emerald-500"},{name:p("teacher.stats.totalViews","Total Views"),value:f.totalViews.toString(),icon:d,change:"+12% this week",changeType:"positive",color:"from-purple-500 to-pink-500"},{name:p("teacher.stats.inProgress","In Progress"),value:f.inProgress.toString(),icon:g,change:"Active recordings",changeType:f.inProgress>0?"warning":"neutral",color:"from-orange-500 to-red-500"}],V=[{title:p("recording.createNew","Create Recording"),description:"Start a new recording session",icon:h,action:()=>window.location.href="/teacher/recordings/create"},{title:p("teacher.actions.manageStudents","Manage Students"),description:"View and manage your students",icon:c,action:()=>window.location.href="/teacher/students"},{title:p("teacher.actions.viewAnalytics","View Analytics"),description:"Detailed performance insights",icon:d,action:()=>window.location.href="/teacher/analytics"}];return k?s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx(t,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:p("teacher.dashboard.title","Teacher Dashboard")}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",(null==j?void 0:j.displayName)||"Teacher"]})]}),s.jsxs(o,{onClick:R,variant:"outline",children:[s.jsx(m,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map((e,t)=>{const r=e.icon;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-br ${e.color}`,children:s.jsx(r,{className:"h-6 w-6 text-white"})}),"positive"===e.changeType&&s.jsx(x,{className:"h-5 w-5 text-green-500"})]}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:e.value}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.change})]},e.name)})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 space-y-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:V.map((e,t)=>{const r=e.icon;return s.jsxs("button",{onClick:e.action,className:"p-4 text-left rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700 transition-colors duration-200",children:[s.jsx(r,{className:"h-6 w-6 text-blue-500 mb-2"}),s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description})]},e.title)})})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Sessions"}),s.jsx(u,{className:"h-5 w-5 text-gray-400"})]}),s.jsx("div",{className:"space-y-3",children:v.length>0?v.map(e=>{var t;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.topic}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:null==(t=e.date)?void 0:t.toLocaleDateString()})]}),s.jsx("div",{className:"w-2 h-2 rounded-full "+("completed"===e.status?"bg-green-500":"live"===e.status?"bg-red-500":"bg-blue-500")})]},e.id)}):s.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[s.jsx(b,{className:"mx-auto h-8 w-8 mb-2"}),s.jsx("p",{children:"No recent sessions"})]})})]})]})]})};export{p as default};
