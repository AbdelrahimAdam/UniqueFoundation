import{j as e,u as r}from"./index-fde0d62d.js";import{r as s,c as a}from"./vendor-0a74ad82.js";import{u as t}from"./useTranslation-b39a34c2.js";import{b as d,u as o}from"./router-80e9042b.js";import{c as i,B as l}from"./Button-e4864804.js";import{U as n}from"./users-dacba3b8.js";import{B as c}from"./book-open-f786a2db.js";import{V as m}from"./video-0db73cd2.js";import{B as b}from"./bar-chart-3-c0cb83cc.js";import{F as g}from"./file-text-6c907fbf.js";import{C as x}from"./calendar-7494118b.js";import{T as u}from"./trending-up-a9e06369.js";import{U as h}from"./user-4c280f79.js";import{G as p}from"./graduation-cap-3f4c18cd.js";import{U as y,S as k}from"./user-check-bb65e8c6.js";import{X as f}from"./x-c1108be6.js";import{C as v}from"./crown-bd341248.js";import{S as w}from"./search-6717dbe2.js";import{C as j}from"./chevron-down-573d0298.js";import{S as N}from"./settings-58b5ca2e.js";import"./firebase-383b8577.js";const C=i("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),M=i("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),z=i("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),_=i("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),S=i("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),E=i("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),L=i("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),$=s.memo(({item:r,isActive:s,isRTL:a,roleColors:t,handleNavigation:d})=>{const o=r.icon;return e.jsxs("button",{onClick:()=>d(r.path),className:"group relative flex items-center w-full px-3 sm:px-4 py-3 sm:py-4 text-left rtl:text-right rounded-2xl transition-all duration-200 backdrop-blur-sm border "+(s?`${t.bg} ${t.text} ${t.border} shadow-lg transform scale-105`:"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-800/50 hover:shadow-md border-transparent hover:border-white/20 dark:hover:border-gray-600/20"),children:[s&&e.jsx("div",{className:`absolute left-0 top-1/2 transform -translate-y-1/2 w-1 h-8 bg-gradient-to-b ${t.gradient} rounded-r-full shadow-sm`}),e.jsx("div",{className:"p-2 rounded-xl transition-all duration-200 backdrop-blur-sm "+(s?`bg-gradient-to-br ${t.gradient} shadow-lg`:"bg-white/50 dark:bg-gray-800/50 group-hover:bg-white/70 dark:group-hover:bg-gray-700/50"),children:e.jsx(o,{size:18,className:s?"text-white":"text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-200"})}),e.jsxs("div",{className:(a?"mr-3":"ml-3")+" flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium block text-sm truncate",children:r.label}),e.jsx("span",{className:"text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-gray-600 dark:text-gray-400 truncate",children:r.description})]})]})}),U=s.memo(({isOpen:i,onClose:l,userRole:w="student",isMobile:j=!1})=>{const{t:N,i18n:C}=t(),{user:S,logout:U,userProfile:R}=r(),A=d(),D=o(),T="ar"===C.language,[G,B]=s.useState(!1);s.useEffect(()=>{const e="dark"===localStorage.getItem("theme")||window.matchMedia("(prefers-color-scheme: dark)").matches;B(e),document.documentElement.classList.toggle("dark",e)},[]);const H=s.useCallback(()=>{const e=!G;B(e),localStorage.setItem("theme",e?"dark":"light"),document.documentElement.classList.toggle("dark",e)},[G]),O=a.useMemo(()=>({admin:[{id:"dashboard",label:N("sidebar.dashboard","Dashboard"),icon:z,path:"/admin/dashboard",description:N("sidebar.dashboard_desc","Overview and statistics")},{id:"users",label:N("sidebar.users","User Management"),icon:n,path:"/admin/users",description:N("sidebar.users_desc","Manage all users and permissions")},{id:"courses",label:N("sidebar.courses","Course Management"),icon:c,path:"/admin/courses",description:N("sidebar.courses_desc","Manage courses and content")},{id:"sessions",label:N("sidebar.sessions","Session Management"),icon:m,path:"/admin/sessions",description:N("sidebar.sessions_desc","Google Meet sessions monitoring")},{id:"analytics",label:N("sidebar.analytics","Analytics"),icon:b,path:"/admin/analytics",description:N("sidebar.analytics_desc","Platform insights and metrics")},{id:"reports",label:N("sidebar.reports","Reports"),icon:g,path:"/admin/reports",description:N("sidebar.reports_desc","System reports and exports")}],teacher:[{id:"dashboard",label:N("sidebar.dashboard","Dashboard"),icon:z,path:"/teacher/dashboard",description:N("sidebar.dashboard_desc","Teaching overview and insights")},{id:"recordings",label:N("sidebar.recordings","My Recordings"),icon:m,path:"/teacher/recordings",description:N("sidebar.recordings_desc","Manage your class recordings")},{id:"sessions",label:N("sidebar.sessions","My Sessions"),icon:x,path:"/teacher/sessions",description:N("sidebar.sessions_desc","Schedule and manage sessions")},{id:"students",label:N("sidebar.students","Students"),icon:n,path:"/teacher/students",description:N("sidebar.students_desc","Manage your students")},{id:"my-courses",label:N("sidebar.my_courses","My Courses"),icon:c,path:"/teacher/my-courses",description:N("sidebar.my_courses_desc","Your teaching courses")},{id:"analytics",label:N("sidebar.analytics","Analytics"),icon:b,path:"/teacher/analytics",description:N("sidebar.analytics_desc","Teaching performance insights")}],student:[{id:"dashboard",label:N("sidebar.dashboard","Dashboard"),icon:z,path:"/student/dashboard",description:N("sidebar.dashboard_desc","Learning overview and progress")},{id:"sessions",label:N("sidebar.sessions","Learning Sessions"),icon:x,path:"/student/sessions",description:N("sidebar.sessions_desc","Join live sessions and classes")},{id:"recordings",label:N("sidebar.recordings","Recordings"),icon:m,path:"/student/recordings",description:N("sidebar.recordings_desc","Watch recorded sessions")},{id:"courses",label:N("sidebar.courses","Browse Courses"),icon:c,path:"/student/courses",description:N("sidebar.courses_desc","Discover and enroll in courses")},{id:"my-courses",label:N("sidebar.my_courses","My Courses"),icon:c,path:"/student/my-courses",description:N("sidebar.my_courses_desc","Your enrolled courses")},{id:"progress",label:N("sidebar.progress","Progress"),icon:u,path:"/student/progress",description:N("sidebar.progress_desc","Track your learning progress")},{id:"teachers",label:N("sidebar.teachers","Teachers"),icon:n,path:"/student/teachers",description:N("sidebar.teachers_desc","View available teachers")}]}),[N]),P=a.useMemo(()=>[{id:"profile",label:N("sidebar.profile","Profile"),icon:h,path:"/profile",description:N("sidebar.profile_desc","Manage your profile settings")},{id:"help",label:N("sidebar.help","Help & Support"),icon:M,path:"/help",description:N("sidebar.help_desc","Get help and support")}],[N]),q=s.useCallback(()=>O[w]||[],[O,w])(),F=s.useCallback(e=>{D(e),j&&l?.()},[D,j,l]),I=s.useCallback(e=>A.pathname===e||A.pathname.startsWith(e+"/"),[A.pathname]),V=s.useCallback(()=>{switch(w){case"admin":return k;case"teacher":return y;case"student":return p;default:return h}},[w]),W=s.useCallback(()=>{switch(w){case"admin":return{gradient:"from-purple-500 to-violet-600",bgGradient:"from-purple-500/15 to-violet-600/15",text:"text-purple-700 dark:text-purple-300",bg:"bg-purple-100/80 dark:bg-purple-900/40",border:"border-purple-200/50 dark:border-purple-700/50"};case"teacher":return{gradient:"from-blue-500 to-cyan-600",bgGradient:"from-blue-500/15 to-cyan-600/15",text:"text-blue-700 dark:text-blue-300",bg:"bg-blue-100/80 dark:bg-blue-900/40",border:"border-blue-200/50 dark:border-blue-700/50"};case"student":return{gradient:"from-green-500 to-emerald-600",bgGradient:"from-green-500/15 to-emerald-600/15",text:"text-green-700 dark:text-green-300",bg:"bg-green-100/80 dark:bg-green-900/40",border:"border-green-200/50 dark:border-green-700/50"};default:return{gradient:"from-gray-500 to-gray-600",bgGradient:"from-gray-500/15 to-gray-600/15",text:"text-gray-700 dark:text-gray-300",bg:"bg-gray-100/80 dark:bg-gray-900/40",border:"border-gray-200/50 dark:border-gray-700/50"}}},[w]),Y=V(),Z=W(),J=s.useCallback(()=>S?.displayName?S.displayName.charAt(0).toUpperCase():S?.email?S.email.charAt(0).toUpperCase():"U",[S]),K=s.useCallback(()=>S?.displayName||S?.email||"User",[S]);return e.jsxs("div",{className:`\n      fixed inset-y-0 left-0 z-50 w-64 sm:w-72 lg:w-80 \n      bg-white/95 dark:bg-gray-900/95 backdrop-blur-2xl\n      border-r border-white/40 dark:border-gray-700/40\n      shadow-2xl shadow-black/10 dark:shadow-black/30\n      transform transition-transform duration-300 ease-out\n      lg:translate-x-0 lg:static lg:inset-0\n      ${T?"right-0 left-auto":""}\n      ${i?"translate-x-0":"-translate-x-full lg:translate-x-0"}\n      flex flex-col h-screen rounded-r-3xl lg:rounded-r-none\n    `,children:[e.jsxs("div",{className:"flex-shrink-0 rounded-t-3xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between h-20 px-4 sm:px-6 border-b border-white/30 dark:border-gray-700/30 bg-white/50 dark:bg-gray-800/50 backdrop-blur-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center shadow-lg backdrop-blur-sm overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 border-2 border-white/20",children:[e.jsx("img",{src:"/logo.png",alt:"Unique Foundation Logo",className:"w-full h-full object-cover rounded-full",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"w-full h-full hidden items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 rounded-full",children:e.jsx("div",{className:"text-white font-bold text-sm sm:text-base",children:"UF"})})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-green-400 border-2 border-white dark:border-gray-900 rounded-full shadow-sm"})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent truncate",children:"Unique Foundation"}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize truncate",children:[w," Portal"]})]})]}),e.jsx("button",{onClick:l,className:"lg:hidden p-2 rounded-xl bg-white/50 dark:bg-gray-800/50 hover:bg-white/70 dark:hover:bg-gray-700/70 transition-all duration-200 backdrop-blur-sm hover:scale-110","aria-label":"Close sidebar",children:e.jsx(f,{size:18,className:"text-gray-600 dark:text-gray-400"})})]}),e.jsx("div",{className:"p-4 sm:p-6 border-b border-white/30 dark:border-gray-700/30 bg-gradient-to-br from-white/60 to-white/40 dark:from-gray-800/60 dark:to-gray-800/40 backdrop-blur-xl",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br ${Z.gradient} rounded-2xl flex items-center justify-center text-white font-bold text-lg shadow-xl backdrop-blur-sm transition-all duration-200 hover:scale-105`,children:J()}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 bg-gradient-to-br ${Z.gradient} rounded-full flex items-center justify-center border-2 border-white dark:border-gray-900 shadow-sm backdrop-blur-sm`,children:e.jsx(Y,{size:10,className:"text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate text-sm sm:text-base",children:K()}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:S?.email||"user@example.com"}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium capitalize backdrop-blur-sm ${Z.bg} ${Z.text} border ${Z.border}`,children:w}),"premium"===R?.subscription?.plan&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-sm backdrop-blur-sm",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),"Premium"]})]})]})]})})]}),e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col rounded-b-3xl",children:e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("nav",{className:"px-3 sm:px-4 py-4 sm:py-6 space-y-2",children:[e.jsx("p",{className:"px-3 sm:px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2 backdrop-blur-sm",children:"Main Menu"}),q.map(r=>e.jsx($,{item:r,isActive:I(r.path),isRTL:T,roleColors:Z,handleNavigation:F},r.id))]}),e.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-6 border-t border-white/30 dark:border-gray-700/30",children:[e.jsx("p",{className:"px-3 sm:px-4 text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2 backdrop-blur-sm",children:"General"}),e.jsx("div",{className:"space-y-2",children:P.map(r=>{const s=r.icon,a=I(r.path);return e.jsxs("button",{onClick:()=>F(r.path),className:"group relative flex items-center w-full px-3 sm:px-4 py-3 text-left rtl:text-right rounded-xl transition-all duration-200 backdrop-blur-sm border "+(a?`${Z.bg} ${Z.text} ${Z.border} shadow-md transform scale-105`:"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-800/50 border-transparent hover:border-white/20 dark:hover:border-gray-600/20"),children:[e.jsx(s,{size:16,className:a?Z.text:"text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-200"}),e.jsx("span",{className:(T?"mr-3":"ml-3")+" font-medium text-sm flex-1 text-left truncate",children:r.label})]},r.id)})})]})]})}),e.jsx("div",{className:"flex-shrink-0 rounded-b-3xl overflow-hidden",children:e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 border-t border-white/30 dark:border-gray-700/30 bg-white/40 dark:bg-gray-800/40 backdrop-blur-xl",children:[e.jsxs("button",{onClick:H,className:"flex items-center w-full px-3 sm:px-4 py-3 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white rounded-xl transition-all duration-200 hover:bg-white/50 dark:hover:bg-gray-700/50 group backdrop-blur-sm border border-transparent hover:border-white/20 dark:hover:border-gray-600/20",children:[G?e.jsx(L,{size:16,className:(T?"ml-3":"mr-3")+" group-hover:text-yellow-500 transition-colors"}):e.jsx(E,{size:16,className:(T?"ml-3":"mr-3")+" group-hover:text-blue-500 transition-colors"}),e.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:G?N("sidebar.lightMode","Light Mode"):N("sidebar.darkMode","Dark Mode")})]}),e.jsxs("button",{onClick:async()=>{try{await U(),D("/login")}catch(e){}},className:"flex items-center w-full px-3 sm:px-4 py-3 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 rounded-xl transition-all duration-200 hover:bg-red-50/50 dark:hover:bg-red-900/20 group backdrop-blur-sm border border-transparent hover:border-red-200/50 dark:hover:border-red-800/50",children:[e.jsx(_,{size:16,className:(T?"ml-3":"mr-3")+" group-hover:scale-105 transition-transform"}),e.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:N("sidebar.logout","Logout")})]}),e.jsx("div",{className:"pt-2 border-t border-white/30 dark:border-gray-700/30",children:e.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"v2.0.0"}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Online"})]})]})})]})})]})}),R=({onMenuClick:a,isDarkMode:d,toggleDarkMode:o})=>{const{t:i,i18n:n}=t(),{user:c,logout:m,userRole:b}=r(),[g,x]=s.useState(!1),[u,p]=s.useState(!1),y=s.useRef(null),k=s.useRef(null);s.useEffect(()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&x(!1),k.current&&!k.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const f=e=>{switch(e){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"teacher":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"student":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}};return e.jsx("header",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg border-b border-white/20 dark:border-gray-700/50 sticky top-0 z-40 transition-all duration-300",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsx("button",{onClick:a,className:"lg:hidden p-2 rounded-lg bg-white/50 dark:bg-gray-700/50 backdrop-blur-sm border border-white/20 dark:border-gray-600/50 text-gray-600 dark:text-gray-300 hover:bg-white/80 dark:hover:bg-gray-600/80 transition-all duration-200 hover:scale-105 hover:shadow-lg",children:e.jsx(S,{size:20})}),e.jsxs("div",{className:"hidden md:block relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(w,{size:18,className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:i("common.search"),className:"pl-10 pr-4 py-2 w-64 bg-white/50 dark:bg-gray-700/50 backdrop-blur-sm border border-white/20 dark:border-gray-600/50 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{const e="en"===n.language?"ar":"en";n.changeLanguage(e),document.documentElement.dir="ar"===e?"rtl":"ltr"},className:"hidden sm:flex items-center space-x-2 rtl:space-x-reverse px-3 py-2 rounded-xl bg-white/50 dark:bg-gray-700/50 backdrop-blur-sm border border-white/20 dark:border-gray-600/50 hover:bg-white/80 dark:hover:bg-gray-600/80 transition-all duration-200 hover:scale-105",children:e.jsx("span",{className:"text-sm font-medium",children:"en"===n.language?"العربية":"English"})}),e.jsx("button",{onClick:o,className:"p-2 rounded-xl bg-white/50 dark:bg-gray-700/50 backdrop-blur-sm border border-white/20 dark:border-gray-600/50 text-gray-600 dark:text-gray-300 hover:bg-white/80 dark:hover:bg-gray-600/80 transition-all duration-200 hover:scale-105 hover:shadow-lg",children:d?e.jsx(L,{size:18}):e.jsx(E,{size:18})}),e.jsxs("div",{className:"relative",ref:k,children:[e.jsxs("button",{onClick:()=>p(!u),className:"p-2 rounded-xl bg-white/50 dark:bg-gray-700/50 backdrop-blur-sm border border-white/20 dark:border-gray-600/50 text-gray-600 dark:text-gray-300 hover:bg-white/80 dark:hover:bg-gray-600/80 transition-all duration-200 hover:scale-105 hover:shadow-lg relative",children:[e.jsx(C,{size:18}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"})]}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white/90 dark:bg-gray-800/90 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/50 py-2 z-50 transform origin-top-right transition-all duration-200 scale-95 hover:scale-100",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:i("notifications.title")})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("div",{className:"px-4 py-3 text-center text-gray-500 dark:text-gray-400",children:i("notifications.noNotifications")})})]})]}),e.jsxs("div",{className:"relative",ref:y,children:[e.jsxs("button",{onClick:()=>x(!g),className:"flex items-center space-x-3 rtl:space-x-reverse p-2 rounded-xl bg-white/50 dark:bg-gray-700/50 backdrop-blur-sm border border-white/20 dark:border-gray-600/50 text-gray-600 dark:text-gray-300 hover:bg-white/80 dark:hover:bg-gray-600/80 transition-all duration-200 hover:scale-105 hover:shadow-lg group",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-bold",children:c?.displayName?.charAt(0)||c?.email?.charAt(0)||"U"}),e.jsxs("div",{className:"hidden sm:block text-left rtl:text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate max-w-32",children:c?.displayName||c?.email}),e.jsx("p",{className:`text-xs px-2 py-0.5 rounded-full ${f(b)}`,children:b})]})]}),e.jsx(j,{size:16,className:"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-transform duration-200"})]}),g&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white/90 dark:bg-gray-800/90 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/50 py-2 z-50 transform origin-top-right transition-all duration-200 scale-95 hover:scale-100",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:c?.displayName||"User"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:c?.email}),e.jsx("p",{className:`text-xs px-2 py-1 rounded-full inline-block mt-1 ${f(b)}`,children:b})]}),e.jsxs("button",{onClick:()=>window.location.href="/profile",className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150",children:[e.jsx(h,{size:16,className:"mr-3 rtl:mr-0 rtl:ml-3"}),i("user.profile")]}),e.jsxs("button",{onClick:()=>window.location.href="/profile?tab=settings",className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150",children:[e.jsx(N,{size:16,className:"mr-3 rtl:mr-0 rtl:ml-3"}),i("user.settings")]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),e.jsxs("button",{onClick:async()=>{try{await m()}catch(e){}},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-150",children:[e.jsx(_,{size:16,className:"mr-3 rtl:mr-0 rtl:ml-3"}),i("auth.logout")]})]})]})]})]})})})},A=({children:r,role:a="student"})=>{const[t,d]=s.useState(!1),[o,i]=s.useState(!1),[l,n]=s.useState(!1);s.useEffect(()=>{const e=()=>{n(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),s.useEffect(()=>{(()=>{const e=localStorage.getItem("theme"),r=window.matchMedia("(prefers-color-scheme: dark)").matches,s="dark"===e||!e&&r;d(s),document.documentElement.classList.toggle("dark",s)})()},[]);const c=s.useCallback(()=>{const e=!t;d(e),document.documentElement.classList.toggle("dark",e),localStorage.setItem("theme",e?"dark":"light")},[t]),m=s.useCallback(()=>{i(!1)},[]),b=s.useCallback(()=>{i(e=>!e)},[]),g=s.useCallback(()=>{l&&o&&m()},[l,o,m]);s.useEffect(()=>{const e=e=>{"Escape"===e.key&&o&&m()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,m]);const x=s.useCallback(e=>{e.target===e.currentTarget&&m()},[m]);s.useEffect(()=>{l&&m()},[r,l,m]);return e.jsxs("div",{className:`min-h-screen ${(()=>{switch(a){case"admin":return"bg-gradient-to-br from-purple-50 to-indigo-100 dark:from-gray-900 dark:to-purple-900";case"teacher":return"bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-gray-900 dark:to-blue-900";case"student":return"bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-900 dark:to-green-900";default:return"bg-gradient-to-br from-gray-50 to-blue-50 dark:from-gray-900 dark:to-gray-800"}})()} transition-colors duration-300`,children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-20 -right-20 sm:-top-40 sm:-right-40 w-40 h-40 sm:w-80 sm:h-80 bg-blue-200 dark:bg-blue-900 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-2xl sm:blur-3xl opacity-10 sm:opacity-20 animate-pulse"}),e.jsx("div",{className:"absolute -bottom-20 -left-20 sm:-bottom-40 sm:-left-40 w-40 h-40 sm:w-80 sm:h-80 bg-purple-200 dark:bg-purple-900 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-2xl sm:blur-3xl opacity-10 sm:opacity-20 animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 w-40 h-40 sm:w-80 sm:h-80 bg-pink-200 dark:bg-pink-900 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-2xl sm:blur-3xl opacity-10 sm:opacity-20 animate-pulse delay-500"})]}),e.jsxs("div",{className:"relative z-10 flex h-screen overflow-hidden",children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden transition-opacity duration-300",onClick:x,"aria-hidden":"true"}),e.jsx(U,{isOpen:o,onClose:m,userRole:a,isMobile:l}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen lg:ml-0 overflow-hidden",onClick:g,children:[e.jsx(R,{onMenuClick:b,isDarkMode:t,toggleDarkMode:c,userRole:a,isSidebarOpen:o}),e.jsx("main",{className:"flex-1 overflow-auto p-3 sm:p-4 lg:p-6 transition-all duration-300",children:e.jsx("div",{className:"max-w-7xl mx-auto w-full",children:r})})]})]}),l&&!o&&e.jsx("div",{className:"fixed bottom-4 left-4 z-30 lg:hidden",children:e.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full p-2 shadow-lg border border-white/20 dark:border-gray-700/50",children:e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-ping"})})})]})};export{A as default};
