import{e,r as t,V as s,l as r,n as a,C as i,P as l,j as n,o,T as c,p as d,m as g}from"./vendor-react-b59152ff.js";import{u as h,L as m}from"./index-cde8ec3e.js";import{r as x}from"./recordingService-f09f52a5.js";import{s as u}from"./sessionService-cec466cd.js";import{B as p}from"./Button-d86c7bdc.js";import"./vendor-c2e5c299.js";import"./firebase-a4f86f3d.js";import"./i18n-417c627b.js";const b=()=>{const{t:b}=e(),{user:y,userProfile:j}=h(),[f,w]=t.useState({totalRecordings:0,published:0,inProgress:0,totalViews:0}),[v,N]=t.useState([]),[k,S]=t.useState(!0),P=null==y?void 0:y.uid;t.useEffect(()=>{P&&R()},[P]);const R=async()=>{try{S(!0);const[e,t]=await Promise.all([x.getAllRecordings(),u.getAllSessions({limit:5})]),s=e.filter(e=>e.teacherId===P||e.createdBy===P),r=t.filter(e=>e.createdBy===P||e.teacherId===P);w({totalRecordings:s.length,published:s.filter(e=>e.isPublished).length,inProgress:s.filter(e=>"recording"===e.status||"processing"===e.status).length,totalViews:s.reduce((e,t)=>e+(t.views||0),0)}),N(r)}catch(e){}finally{S(!1)}},T=[{name:b("teacher.stats.totalRecordings","Total Recordings"),value:f.totalRecordings.toString(),icon:s,change:`${f.published} published`,changeType:"positive",color:"from-blue-500 to-cyan-500"},{name:b("teacher.stats.published","Published"),value:f.published.toString(),icon:r,change:`${Math.round(f.published/Math.max(f.totalRecordings,1)*100)}% of total`,changeType:"positive",color:"from-green-500 to-emerald-500"},{name:b("teacher.stats.totalViews","Total Views"),value:f.totalViews.toString(),icon:a,change:"+12% this week",changeType:"positive",color:"from-purple-500 to-pink-500"},{name:b("teacher.stats.inProgress","In Progress"),value:f.inProgress.toString(),icon:i,change:"Active recordings",changeType:f.inProgress>0?"warning":"neutral",color:"from-orange-500 to-red-500"}],V=[{title:b("recording.createNew","Create Recording"),description:"Start a new recording session",icon:l,action:()=>window.location.href="/teacher/recordings/create"},{title:b("teacher.actions.manageStudents","Manage Students"),description:"View and manage your students",icon:r,action:()=>window.location.href="/teacher/students"},{title:b("teacher.actions.viewAnalytics","View Analytics"),description:"Detailed performance insights",icon:a,action:()=>window.location.href="/teacher/analytics"}];return k?n.jsx("div",{className:"flex items-center justify-center min-h-96",children:n.jsx(m,{size:"lg"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:b("teacher.dashboard.title","Teacher Dashboard")}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",(null==j?void 0:j.displayName)||"Teacher"]})]}),n.jsxs(p,{onClick:R,variant:"outline",children:[n.jsx(o,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map((e,t)=>{const s=e.icon;return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-br ${e.color}`,children:n.jsx(s,{className:"h-6 w-6 text-white"})}),"positive"===e.changeType&&n.jsx(c,{className:"h-5 w-5 text-green-500"})]}),n.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:e.value}),n.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e.name}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.change})]},e.name)})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2 space-y-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:V.map((e,t)=>{const s=e.icon;return n.jsxs("button",{onClick:e.action,className:"p-4 text-left rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700 transition-colors duration-200",children:[n.jsx(s,{className:"h-6 w-6 text-blue-500 mb-2"}),n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description})]},e.title)})})]})}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Sessions"}),n.jsx(d,{className:"h-5 w-5 text-gray-400"})]}),n.jsx("div",{className:"space-y-3",children:v.length>0?v.map(e=>{var t;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.topic}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:null==(t=e.date)?void 0:t.toLocaleDateString()})]}),n.jsx("div",{className:"w-2 h-2 rounded-full "+("completed"===e.status?"bg-green-500":"live"===e.status?"bg-red-500":"bg-blue-500")})]},e.id)}):n.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[n.jsx(g,{className:"mx-auto h-8 w-8 mb-2"}),n.jsx("p",{children:"No recent sessions"})]})})]})]})]})};export{b as default};
