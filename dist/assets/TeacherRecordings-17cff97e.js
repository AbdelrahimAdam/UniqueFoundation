import{u as e,j as r,L as s}from"./index-5767ddf8.js";import{r as t}from"./vendor-0a74ad82.js";import"./firebase-383b8577.js";import{r as a}from"./recordingService-a3f82448.js";import{B as l}from"./Button-3bd6c448.js";import{C as i}from"./CreateRecordingModal-2d283263.js";import{u as d}from"./useTranslation-aa9b7537.js";import{P as o}from"./plus-0f0e053e.js";import{V as n}from"./video-9bd5ab91.js";import{C as c}from"./check-circle-0b4512e8.js";import{E as x}from"./eye-b2ee8344.js";import{C as m}from"./clock-7df3ab35.js";import{S as g}from"./search-574a4b7f.js";import{F as h}from"./filter-5c97562b.js";import{P as u}from"./play-circle-c1f21b6b.js";import{X as j}from"./x-circle-bf91ba73.js";import{P as p}from"./pen-square-ef6ec0ae.js";import"./router-80e9042b.js";import"./index.esm-e04fd8e7.js";import"./Select-c7823c9b.js";import"./utils-db1934d6.js";import"./chevron-down-d5b28354.js";import"./alert-circle-b175e642.js";import"./check-290a7886.js";import"./x-231358ce.js";import"./calendar-db1a81dc.js";import"./user-88eaccbf.js";import"./upload-ded68650.js";import"./link-3c8a4adf.js";import"./file-text-55423f48.js";import"./book-open-cf5b879f.js";import"./download-ee602c74.js";import"./external-link-81bc50d5.js";const b=()=>{d();const{user:b}=e(),[y,f]=t.useState([]),[w,N]=t.useState(!0),[v,k]=t.useState(""),[S,C]=t.useState("all"),[M,P]=t.useState(!1),[B,L]=t.useState({}),R=b?.uid;t.useEffect(()=>{R&&$()},[R]);const $=async()=>{try{N(!0);const e=(await a.getAllRecordings()).filter(e=>e.teacherId===R||e.createdBy===R);f(e)}catch(e){}finally{N(!1)}},z=y.filter(e=>{const r=e.title?.toLowerCase().includes(v.toLowerCase())||e.description?.toLowerCase().includes(v.toLowerCase())||e.tags?.some(e=>e.toLowerCase().includes(v.toLowerCase())),s="all"===S||e.status===S||"published"===S&&e.isPublished||"unpublished"===S&&!e.isPublished;return r&&s}),F=e=>{switch(e){case"completed":return"from-green-500 to-emerald-500";case"recording":return"from-blue-500 to-cyan-500";case"processing":return"from-yellow-500 to-orange-500";case"failed":return"from-red-500 to-pink-500";default:return"from-gray-500 to-gray-600"}},A=e=>{if(!e)return"0:00";const r=Math.floor(e/3600),s=Math.floor(e%3600/60),t=Math.floor(e%60);return r>0?`${r}:${s.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`:`${s}:${t.toString().padStart(2,"0")}`},T=e=>{if(!e)return"0 B";const r=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,r)*100)/100+" "+["B","KB","MB","GB"][r]};return w?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsx(s,{size:"lg"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Recordings"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage and publish your recording sessions"})]}),r.jsxs(l,{onClick:()=>P(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600",children:[r.jsx(o,{className:"h-4 w-4 mr-2"}),"New Recording"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.length})]}),r.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(n,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Published"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.filter(e=>e.isPublished).length})]}),r.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(c,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Views"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.reduce((e,r)=>e+(r.views||0),0)})]}),r.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsx(x,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"In Progress"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.filter(e=>"recording"===e.status||"processing"===e.status).length})]}),r.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:r.jsx(m,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})})]})})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search recordings...",value:v,onChange:e=>k(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsxs("select",{value:S,onChange:e=>C(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"published",children:"Published"}),r.jsx("option",{value:"unpublished",children:"Unpublished"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"recording",children:"Recording"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"failed",children:"Failed"})]}),r.jsxs(l,{variant:"outline",children:[r.jsx(h,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]})}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:z.map(e=>{const s=(e=>{switch(e){case"completed":return c;case"recording":return u;case"processing":return m;case"failed":return j;default:return n}})(e.status);return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg line-clamp-2",children:e.title}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1 line-clamp-2",children:e.description||"No description provided"})]}),r.jsx("div",{className:`ml-3 p-2 rounded-lg bg-gradient-to-br ${F(e.status)}`,children:r.jsx(s,{className:"h-4 w-4 text-white"})})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),e.views||0," views"]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),A(e.duration)]}),e.isPublished&&r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 rounded-full text-xs",children:"Published"})]})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"File Size"}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T(e.fileSize)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created"}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(e.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status"}),r.jsx("span",{className:"text-sm font-medium capitalize "+("completed"===e.status?"text-green-600 dark:text-green-400":"recording"===e.status?"text-blue-600 dark:text-blue-400":"processing"===e.status?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"),children:e.status})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[e.recordingUrl&&r.jsx("a",{href:e.recordingUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:r.jsxs(l,{className:"w-full",children:[r.jsx(u,{className:"h-4 w-4 mr-2"}),"Watch"]})}),e.isPublished?r.jsx(l,{variant:"outline",onClick:()=>(async e=>{try{L(r=>({...r,[e]:!0})),await a.unpublishRecording(e),await $()}catch(r){}finally{L(r=>({...r,[e]:!1}))}})(e.id),disabled:B[e.id],children:r.jsx(j,{className:"h-4 w-4"})}):r.jsx(l,{onClick:()=>(async e=>{try{L(r=>({...r,[e]:!0})),await a.publishRecording(e),await $()}catch(r){}finally{L(r=>({...r,[e]:!1}))}})(e.id),disabled:B[e.id],children:r.jsx(c,{className:"h-4 w-4"})}),r.jsx(l,{variant:"outline",size:"sm",children:r.jsx(p,{className:"h-4 w-4"})})]})]})]},e.id)})}),0===z.length&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(n,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No recordings found"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:v||"all"!==S?"Try adjusting your search or filters":"Get started by creating your first recording"}),r.jsxs(l,{onClick:()=>P(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600",children:[r.jsx(o,{className:"h-4 w-4 mr-2"}),"Create Recording"]})]}),M&&r.jsx(i,{onClose:()=>P(!1),onSuccess:()=>{P(!1),$()}})]})};export{b as default};
