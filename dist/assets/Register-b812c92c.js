import{u as e,j as a}from"./index-ce15b861.js";import{r}from"./vendor-0a74ad82.js";import{u as s}from"./index.esm-e04fd8e7.js";import{u as t,L as i}from"./router-80e9042b.js";import{B as l}from"./Button-fb358952.js";import{I as o}from"./Input-6b5525f6.js";import{u as d}from"./useTranslation-9d3f62b5.js";import{U as n}from"./user-1dea5926.js";import{M as c}from"./mail-49d1c0aa.js";import{L as m,E as u}from"./lock-72658cc7.js";import{E as g}from"./eye-ccc819fa.js";import"./firebase-383b8577.js";const x=()=>{const{t:x}=d(),{register:h}=e(),p=t(),[b,f]=r.useState(!1),[y,j]=r.useState(!1),[v,N]=r.useState(!1),[w,k]=r.useState(""),[C,L]=r.useState(""),[P,S]=r.useState("student"),{register:q,handleSubmit:z,formState:{errors:A},watch:R}=s(),E=R("password");return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-16 w-16 rounded-full object-cover"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x("auth.register","Create your account")}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:x("auth.registerSubtitle","Create your account to get started.")})]}),C&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:C})})]})}),w&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:w})})]})}),a.jsxs("div",{className:"flex space-x-4 rtl:space-x-reverse",children:[a.jsx("button",{type:"button",onClick:()=>S("teacher"),className:"flex-1 py-2 px-4 rounded-lg border-2 transition-colors "+("teacher"===P?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500"),children:x("auth.registerAsTeacher","Teacher")}),a.jsx("button",{type:"button",onClick:()=>S("student"),className:"flex-1 py-2 px-4 rounded-lg border-2 transition-colors "+("student"===P?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500"),children:x("auth.registerAsStudent","Student")})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:z(async e=>{N(!0),k(""),L("");try{const a=await h(e.email,e.password,{firstName:e.firstName,lastName:e.lastName,role:P});a.success?a.requiresApproval?L(a.message||x("auth.registrationSuccess","Registration successful! Please wait for admin approval before logging in.")):(L(x("auth.registrationSuccessAuto","Registration successful! Redirecting to dashboard...")),setTimeout(()=>p("/dashboard"),2e3)):k(a.error||x("auth.registrationFailed","Registration failed. Please try again."))}catch(a){const e=(e=>{switch(e.code){case"auth/email-already-in-use":return x("auth.emailInUse","This email is already registered. Please use a different email or sign in.");case"auth/invalid-email":return x("auth.invalidEmail","The email address is not valid.");case"auth/operation-not-allowed":return x("auth.operationNotAllowed","Email/password accounts are not enabled. Please contact support.");case"auth/weak-password":return x("auth.weakPassword","The password is too weak. Please use a stronger password.");case"auth/network-request-failed":return x("auth.networkError","Network error. Please check your connection and try again.");default:return e.message||x("auth.registrationFailed","Registration failed. Please try again.")}})(a);k(e)}finally{N(!1)}}),children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(o,{label:x("auth.firstName","First Name"),type:"text",autoComplete:"given-name",placeholder:"John",icon:a.jsx(n,{size:18,className:"text-gray-400"}),...q("firstName",{required:x("validation.required",{field:"First Name"}),minLength:{value:2,message:x("validation.minLength",{field:"First Name",min:2})}}),error:A.firstName?.message}),a.jsx(o,{label:x("auth.lastName","Last Name"),type:"text",autoComplete:"family-name",placeholder:"Doe",...q("lastName",{required:x("validation.required",{field:"Last Name"}),minLength:{value:2,message:x("validation.minLength",{field:"Last Name",min:2})}}),error:A.lastName?.message})]}),a.jsx(o,{label:x("auth.email","Email address"),type:"email",autoComplete:"email",placeholder:"your@email.com",icon:a.jsx(c,{size:18,className:"text-gray-400"}),...q("email",{required:x("validation.required",{field:"Email"}),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:x("validation.invalidEmail","Invalid email address")}}),error:A.email?.message}),a.jsx(o,{label:x("auth.password","Password"),type:b?"text":"password",autoComplete:"new-password",placeholder:"••••••••",icon:a.jsx(m,{size:18,className:"text-gray-400"}),trailingIcon:a.jsx("button",{type:"button",onClick:()=>f(!b),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b?a.jsx(u,{size:18}):a.jsx(g,{size:18})}),...q("password",{required:x("validation.required",{field:"Password"}),minLength:{value:6,message:x("validation.minLength",{field:"Password",min:6})}}),error:A.password?.message}),a.jsx(o,{label:x("auth.confirmPassword","Confirm Password"),type:y?"text":"password",autoComplete:"new-password",placeholder:"••••••••",icon:a.jsx(m,{size:18,className:"text-gray-400"}),trailingIcon:a.jsx("button",{type:"button",onClick:()=>j(!y),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:y?a.jsx(u,{size:18}):a.jsx(g,{size:18})}),...q("confirmPassword",{required:x("validation.required",{field:"Confirm Password"}),validate:e=>e===E||x("validation.passwordsMatch","Passwords must match")}),error:A.confirmPassword?.message})]}),a.jsx(l,{type:"submit",className:"w-full",loading:v,disabled:v,children:v?x("auth.creatingAccount","Creating account..."):x("auth.register","Create account")}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[x("auth.hasAccount","Already have an account?")," ",a.jsx(i,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:x("auth.login","Sign in")})]})})]})]})})};export{x as default};
