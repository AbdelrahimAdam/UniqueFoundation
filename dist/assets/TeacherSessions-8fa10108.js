import{u as e,j as s,L as t}from"./index-fde0d62d.js";import{r}from"./vendor-0a74ad82.js";import"./firebase-383b8577.js";import{s as a}from"./sessionService-e4efedfb.js";import{B as l}from"./Button-e4864804.js";import d from"./CreateSessionModal-6d45654f.js";import{u as i}from"./useTranslation-b39a34c2.js";import{P as o}from"./plus-bf6b85bd.js";import{C as n}from"./calendar-7494118b.js";import{C as c}from"./clock-ef5a2b60.js";import{P as m}from"./play-circle-3e70d83b.js";import{C as x}from"./check-circle-bee84931.js";import{S as g}from"./search-6717dbe2.js";import{F as h}from"./filter-80a6ecdb.js";import{U as u}from"./users-dacba3b8.js";import{L as p}from"./link-601684f1.js";import{V as j}from"./video-0db73cd2.js";import{M as b}from"./more-vertical-09034cd2.js";import"./router-80e9042b.js";import"./index.esm-e04fd8e7.js";import"./Select-f5fa357c.js";import"./utils-db1934d6.js";import"./chevron-down-573d0298.js";import"./alert-circle-e10dc133.js";import"./check-9b2fada3.js";import"./camera-0bfc243e.js";import"./x-c1108be6.js";import"./file-text-6c907fbf.js";import"./book-open-f786a2db.js";import"./user-4c280f79.js";const f=()=>{i();const{user:f}=e(),[y,w]=r.useState([]),[v,N]=r.useState(!0),[k,S]=r.useState(""),[L,C]=r.useState("all"),[T,M]=r.useState(!1),[D,B]=r.useState(!1),z=f?.uid;r.useEffect(()=>{const e=()=>{B(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.useEffect(()=>(document.body.style.overflow=T?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[T]),r.useEffect(()=>{z&&E()},[z]);const E=async()=>{try{N(!0);const e=(await a.getAllSessions()).filter(e=>e.createdBy===z||e.teacherId===z);w(e)}catch(e){}finally{N(!1)}},P=e=>{e&&(e.preventDefault(),e.stopPropagation()),M(!0)},_=y.filter(e=>{const s=e.title?.toLowerCase().includes(k.toLowerCase())||e.topic?.toLowerCase().includes(k.toLowerCase())||e.description?.toLowerCase().includes(k.toLowerCase()),t="all"===L||e.status===L;return s&&t}),A=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"live":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},G={total:y.length,scheduled:y.filter(e=>"scheduled"===e.status).length,live:y.filter(e=>"live"===e.status).length,completed:y.filter(e=>"completed"===e.status).length};return v?s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx(t,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[T&&s.jsx(d,{onClose:()=>{M(!1)},onSuccess:()=>{E(),M(!1)}}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"My Sessions"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm sm:text-base",children:"Manage your teaching sessions and Google Meet links"})]}),s.jsxs("button",{className:"w-full sm:w-auto bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-6 py-3 rounded-xl font-medium flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 touch-manipulation",onClick:P,onTouchStart:e=>e.currentTarget.classList.add("active:scale-95"),children:[s.jsx(o,{className:"h-4 w-4 mr-2"}),"Schedule Session"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:G.total})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(n,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Scheduled"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:G.scheduled})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:s.jsx(c,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-600 dark:text-yellow-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Live"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:G.live})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(m,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600 dark:text-red-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Completed"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:G.completed})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(x,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600 dark:text-green-400"})})]})})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search sessions...",value:k,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("select",{value:L,onChange:e=>C(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"live",children:"Live"}),s.jsx("option",{value:"completed",children:"Completed"})]}),s.jsxs(l,{variant:"outline",children:[s.jsx(h,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]})}),s.jsx("div",{className:"space-y-4",children:_.map(e=>{const t=(e=>{switch(e){case"scheduled":return n;case"live":return m;case"completed":return x;default:return c}})(e.status),r="live"===e.status,a="scheduled"===e.status,d=e.recordingUrl;return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-4 sm:p-6 hover:shadow-xl transition-all duration-300",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"p-3 rounded-lg "+(r?"bg-red-100 dark:bg-red-900/30":a?"bg-blue-100 dark:bg-blue-900/30":"bg-green-100 dark:bg-green-900/30"),children:s.jsx(t,{className:"h-6 w-6 "+(r?"text-red-600 dark:text-red-400":a?"text-blue-600 dark:text-blue-400":"text-green-600 dark:text-green-400")})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.title||e.topic}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${A(e.status)} self-start sm:self-auto`,children:e.status})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 text-sm sm:text-base",children:e.description}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-6 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(n,{className:"h-4 w-4 mr-2"}),e.scheduledTime?new Date(e.scheduledTime).toLocaleDateString():"TBD"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(c,{className:"h-4 w-4 mr-2"}),e.scheduledTime?new Date(e.scheduledTime).toLocaleTimeString():"TBD"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(u,{className:"h-4 w-4 mr-2"}),e.participantsCount||0," participants"]})]}),e.meetLink&&s.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[s.jsx(p,{className:"h-4 w-4 text-blue-500"}),s.jsx("a",{href:e.meetLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"Google Meet Link"})]})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[(r||a)&&s.jsxs(l,{onClick:()=>(e=>{(e.meetLink||e.googleMeetLink)&&window.open(e.meetLink||e.googleMeetLink,"_blank")})(e),className:r?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white",children:[s.jsx(m,{className:"h-4 w-4 mr-2"}),r?"Join Live":"Join"]}),d&&s.jsx("a",{href:e.recordingUrl,target:"_blank",rel:"noopener noreferrer",children:s.jsxs(l,{variant:"outline",children:[s.jsx(j,{className:"h-4 w-4 mr-2"}),"Recording"]})}),s.jsx(l,{variant:"outline",size:"sm",children:s.jsx(b,{className:"h-4 w-4"})})]})]})},e.id)})}),0===_.length&&s.jsxs("div",{className:"text-center py-8 sm:py-12",children:[s.jsx(n,{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No sessions found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm sm:text-base",children:k||"all"!==L?"Try adjusting your search or filters":"Get started by scheduling your first session"}),s.jsxs("button",{className:"w-full sm:w-auto bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-6 py-3 rounded-xl font-medium flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 touch-manipulation mx-auto",onClick:P,children:[s.jsx(o,{className:"h-4 w-4 mr-2"}),"Schedule Session"]})]})]})};export{f as default};
