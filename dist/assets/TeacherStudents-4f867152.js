import{u as e,j as s,L as t}from"./index-fde0d62d.js";import{r as a}from"./vendor-0a74ad82.js";import{u as r}from"./userService-11868d81.js";import"./firebase-383b8577.js";import{c as l,B as n}from"./Button-e4864804.js";import{u as o}from"./useTranslation-b39a34c2.js";import{M as i}from"./mail-a1bf1c0f.js";import{U as d}from"./users-dacba3b8.js";import{T as m}from"./trending-up-a9e06369.js";import{A as x}from"./award-c54889ea.js";import{S as c}from"./star-87c5b8d4.js";import{S as h}from"./search-6717dbe2.js";import{F as g}from"./filter-80a6ecdb.js";import{B as p}from"./book-open-f786a2db.js";import{G as u}from"./graduation-cap-3f4c18cd.js";import{C as j}from"./calendar-7494118b.js";import{P as f,M as w}from"./phone-a198bab9.js";import{E as y}from"./eye-e541892e.js";import{M as b}from"./more-vertical-09034cd2.js";import"./router-80e9042b.js";const N=l("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),v=()=>{o();const{user:l}=e(),[v,k]=a.useState([]),[S,D]=a.useState(!0),[C,T]=a.useState(""),[M,L]=a.useState("all"),[A,z]=a.useState(!1),P=l?.uid;a.useEffect(()=>{const e=()=>{z(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a.useEffect(()=>{P&&W()},[P]);const W=async()=>{try{D(!0);const e=await r.getAllUsers(),s=e.filter(e=>"student"===e.role&&e.isActive).map(e=>({...e,enrolledCourses:e.enrolledCourses||Math.floor(5*Math.random())+1,completedSessions:e.completedSessions||Math.floor(20*Math.random()),attendanceRate:e.attendanceRate||Math.floor(30*Math.random())+70,performance:e.performance||(20*Math.random()+80).toFixed(1),lastSession:e.lastSession||new Date(Date.now()-7*Math.random()*24*60*60*1e3).toISOString(),joinDate:e.createdAt||new Date(Date.now()-365*Math.random()*24*60*60*1e3).toISOString()}));k(s)}catch(e){}finally{D(!1)}},U=(e,s,t)=>{t&&(t.preventDefault(),t.stopPropagation())},E=v.filter(e=>e.displayName?.toLowerCase().includes(C.toLowerCase())||e.email?.toLowerCase().includes(C.toLowerCase())||e.phone?.toLowerCase().includes(C.toLowerCase())),I=e=>{const s=e?Date.now()-new Date(e).getTime():1/0;return s<864e5?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":s<6048e5?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"},B=e=>{const s=e?Date.now()-new Date(e).getTime():1/0;return s<864e5?"Active Today":s<6048e5?"Active This Week":"Inactive"},R={total:v.length,active:v.filter(e=>e.lastLogin&&Date.now()-new Date(e.lastLogin).getTime()<6048e5).length,newThisWeek:v.filter(e=>e.joinDate&&Date.now()-new Date(e.joinDate).getTime()<6048e5).length,highPerformers:v.filter(e=>e.performance>=90).length};return S?s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx(t,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"My Students"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm sm:text-base",children:"Manage and communicate with your students"})]}),s.jsxs("button",{className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-3 rounded-xl font-medium flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 touch-manipulation",onClick:()=>{},children:[s.jsx(i,{className:"h-4 w-4 mr-2"}),"Message All"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Students"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:R.total})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(d,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active This Week"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:R.active})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(m,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600 dark:text-green-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"New This Week"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:R.newThisWeek})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:s.jsx(x,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600 dark:text-purple-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"High Performers"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:R.highPerformers})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:s.jsx(c,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-600 dark:text-yellow-400"})})]})})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search students by name, email, or phone...",value:C,onChange:e=>T(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("select",{value:M,onChange:e=>L(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Students"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"new",children:"New This Week"}),s.jsx("option",{value:"high",children:"High Performers"})]}),s.jsxs(n,{variant:"outline",children:[s.jsx(g,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]})}),s.jsx("div",{className:"space-y-4",children:E.map(e=>{const t=e.lastLogin&&Date.now()-new Date(e.lastLogin).getTime()<6048e5,a=e.performance>=90;return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-4 sm:p-6 hover:shadow-xl transition-all duration-300",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center text-white font-bold text-lg shadow-xl",children:e.displayName?.charAt(0)?.toUpperCase()||e.email?.charAt(0)?.toUpperCase()}),t&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-green-400 border-2 border-white dark:border-gray-900 rounded-full shadow-sm"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.displayName||"No Name"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${I(e.lastLogin)}`,children:B(e.lastLogin)}),a&&s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:[s.jsx(c,{className:"h-3 w-3 inline mr-1"}),"Top Performer"]}),s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+(l=e.attendanceRate,l>=90?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":l>=80?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":l>=70?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"),children:[e.attendanceRate,"% Attendance"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 text-sm sm:text-base",children:e.email}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-6 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(p,{className:"h-4 w-4 mr-2"}),e.enrolledCourses||0," courses"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(u,{className:"h-4 w-4 mr-2"}),e.completedSessions||0," sessions"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(m,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{className:(r=e.performance,r>=90?"text-green-600 dark:text-green-400":r>=80?"text-yellow-600 dark:text-yellow-400":r>=70?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"),children:[e.performance,"% avg"]})]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(j,{className:"h-4 w-4 mr-2"}),"Joined ",e.joinDate?new Date(e.joinDate).toLocaleDateString():"Unknown"]})]}),(e.phone||e.location)&&s.jsxs("div",{className:"flex flex-wrap gap-4 mt-3 text-sm text-gray-500 dark:text-gray-400",children:[e.phone&&s.jsxs("span",{className:"flex items-center",children:[s.jsx(f,{className:"h-4 w-4 mr-2"}),e.phone]}),e.location&&s.jsxs("span",{className:"flex items-center",children:[s.jsx(w,{className:"h-4 w-4 mr-2"}),e.location]})]})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[s.jsxs(n,{onClick:e=>U(0,0,e),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[s.jsx(N,{className:"h-4 w-4 mr-2"}),"Message"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(n,{variant:"outline",size:"sm",onClick:e=>U(0,0,e),children:s.jsx(y,{className:"h-4 w-4"})}),e.phone&&s.jsx(n,{variant:"outline",size:"sm",onClick:e=>U(0,0,e),children:s.jsx(f,{className:"h-4 w-4"})}),s.jsx(n,{variant:"outline",size:"sm",children:s.jsx(b,{className:"h-4 w-4"})})]})]})]})},e.id);var r,l})}),0===E.length&&s.jsxs("div",{className:"text-center py-8 sm:py-12",children:[s.jsx(d,{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No students found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm sm:text-base",children:C||"all"!==M?"Try adjusting your search or filters":"You currently have no students assigned to your courses"}),s.jsxs("button",{className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-3 rounded-xl font-medium flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 touch-manipulation mx-auto",onClick:()=>{},children:[s.jsx(d,{className:"h-4 w-4 mr-2"}),"Import Students"]})]})]})};export{v as default};
