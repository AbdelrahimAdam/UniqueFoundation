import{j as e,u as a,o as r}from"./index-5767ddf8.js";import{c as s,r as l}from"./vendor-0a74ad82.js";import{u as t}from"./index.esm-e04fd8e7.js";import{u as i,S as o}from"./Select-c7823c9b.js";import{B as d}from"./Button-3bd6c448.js";import{r as n}from"./recordingService-a3f82448.js";import{u as c}from"./useTranslation-aa9b7537.js";import{V as u}from"./video-9bd5ab91.js";import{X as m}from"./x-231358ce.js";import{A as x}from"./alert-circle-b175e642.js";import{C as g}from"./check-circle-0b4512e8.js";import{C as b}from"./calendar-db1a81dc.js";import{C as h}from"./clock-7df3ab35.js";import{U as p}from"./user-88eaccbf.js";import{G as v,U as f}from"./upload-ded68650.js";import{L as y}from"./link-3c8a4adf.js";import{F as j}from"./file-text-55423f48.js";import{B as k}from"./book-open-cf5b879f.js";import{D as N}from"./download-ee602c74.js";import{E as w}from"./external-link-81bc50d5.js";const S=s.forwardRef(({label:a,type:r="text",placeholder:s,error:l,disabled:t,icon:i,suffix:o,required:d,autoFocus:n=!1,...c},u)=>e.jsxs("div",{className:"space-y-2",children:[a&&e.jsxs("label",{className:"block text-sm font-medium "+(l?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:[a,d&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[i&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(i,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:r,className:`w-full px-4 py-3 border ${l?"border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"} rounded-2xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 ${t?"opacity-50 cursor-not-allowed":""} ${i?"pl-10":""} ${o?"pr-16":""}`,placeholder:s,disabled:t,ref:u,autoFocus:n,...c}),o&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:o})})]}),l&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:l})]})),D=s.forwardRef(({label:a,placeholder:r,error:s,disabled:l,rows:t=3,required:i,autoFocus:o=!1,...d},n)=>e.jsxs("div",{className:"space-y-2",children:[a&&e.jsxs("label",{className:"block text-sm font-medium "+(s?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:[a,i&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{rows:t,className:`w-full px-4 py-3 border ${s?"border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"} rounded-2xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 resize-none ${l?"opacity-50 cursor-not-allowed":""}`,placeholder:r,disabled:l,ref:n,autoFocus:o,...d}),s&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:s})]})),M=({onClose:s,onSuccess:M,sessionId:V=null,initialData:L={}})=>{c();const{user:C}=a(),G=r(),[E,z]=l.useState(!1),[R,q]=l.useState(""),[U,I]=l.useState(""),[F,A]=l.useState([]),[_,B]=l.useState(!1),[$,P]=l.useState(0),[T,Q]=l.useState(null),[H,O]=l.useState(""),[W,J]=l.useState(0),K=l.useRef(null),Y=l.useRef(null),Z=l.useRef(null),{register:X,handleSubmit:ee,formState:{errors:ae,isDirty:re,isValid:se},watch:le,setValue:te,reset:ie,trigger:oe}=t({mode:"onChange",defaultValues:{title:L.title||"",description:L.description||"",sessionId:V||L.sessionId||"",meetLink:L.meetLink||"",recordingUrl:L.recordingUrl||"",duration:L.duration||0,fileSize:L.fileSize||0,quality:L.quality||"720p",visibility:L.visibility||"private",category:L.category||"english",tags:Array.isArray(L.tags)?L.tags.join(", "):L.tags||"",instructorEmail:C?.email||"",instructorName:C?.displayName||"",...L}}),de=le(),ne=l.useCallback(e=>{const a=F.find(a=>a.id===e);Q(a),a&&(te("title",a.title||`Recording - ${a.scheduledTime?.toLocaleDateString()}`,{shouldValidate:!0}),te("meetLink",a.meetLink,{shouldValidate:!0}),te("instructorEmail",a.instructorEmail,{shouldValidate:!0}),te("sessionId",e,{shouldValidate:!0}),te("category",a.category||"english",{shouldValidate:!0}),setTimeout(()=>{K.current&&K.current.focus()},100))},[F,te]),ce=l.useCallback(e=>{const a=parseInt(e)||0;if(te("duration",a,{shouldValidate:!0}),a>0){const e={"360p":50,"480p":100,"720p":250,"1080p":500,"4k":1e3}[de.quality]||250,r=Math.round(a/60*e);te("fileSize",r,{shouldValidate:!0})}},[te,de.quality]),ue=l.useCallback(e=>{te("quality",e,{shouldValidate:!0}),de.duration&&ce(de.duration)},[te,de.duration,ce]),me=l.useCallback(e=>{te("category",e,{shouldValidate:!0})},[te]),xe=l.useCallback(e=>{te("visibility",e,{shouldValidate:!0})},[te]);l.useEffect(()=>{ge()},[]),l.useEffect(()=>{if(V&&F.length>0){const e=F.find(e=>e.id===V);Q(e),e&&(te("title",e.title||e.topic,{shouldValidate:!0}),te("meetLink",e.meetLink,{shouldValidate:!0}),te("instructorEmail",e.instructorEmail,{shouldValidate:!0}),te("category",e.category||"english",{shouldValidate:!0}))}},[V,F,te]),l.useEffect(()=>{de.recordingUrl?be(de.recordingUrl):O("")},[de.recordingUrl]),l.useEffect(()=>{H.isValid&&(de.duration&&0!==de.duration||te("duration",60,{shouldValidate:!0}),de.duration>0&&ce(de.duration))},[H.isValid,de.duration,de.quality,te,ce]);const ge=async()=>{try{B(!0),q("");const e=await n.getSessionsForRecordingManagement(C.uid);A(e),0!==e.length||V||q("No Google Meet sessions found. You can still create a recording without a session.")}catch(e){q("Failed to load Google Meet sessions. You can still create a recording manually.")}finally{B(!1)}},be=e=>{try{if(n.recordingWorkflow.validateDriveUrl(e)){const a=n.extractDriveFileId(e),r=`https://drive.google.com/uc?export=view&id=${a}`,s=`https://drive.google.com/uc?export=download&id=${a}`;O({isValid:!0,fileId:a,previewUrl:r,downloadUrl:s,viewUrl:`https://drive.google.com/file/d/${a}/view`,type:"google_drive"})}else O({isValid:!1,error:"Please enter a valid Google Drive link (should start with https://drive.google.com/file/d/)"})}catch(a){O({isValid:!1,error:"Invalid URL format"})}},he=async e=>{try{const r=(a=e.tags)?Array.isArray(a)?a:"string"==typeof a?a.split(",").map(e=>e.trim()).filter(Boolean):[]:[],s={title:e.title,description:e.description,meetLink:e.meetLink||"",recordingUrl:e.recordingUrl,duration:parseInt(e.duration)||0,fileSize:parseInt(e.fileSize)||0,quality:e.quality,visibility:e.visibility,category:e.category,tags:r,instructorId:C.uid,instructorEmail:C.email,instructorName:C.displayName||C.email,status:"recorded",recordingStatus:"available",isPublished:"public"===e.visibility,recordingAvailableFrom:new Date,courseId:"general"};return e.sessionId&&(s.sessionId=e.sessionId),await n.createRecording(s)}catch(r){throw new Error(r.message||"Failed to create recording")}var a},pe=i(e=>he(e),{onSuccess:e=>{G.invalidateQueries(["recordings"]),G.invalidateQueries(["sessions"]),G.invalidateQueries(["teacherRecordings"]),G.invalidateQueries(["studentRecordings"]),G.invalidateQueries(["instructorMeetRecordings"]),I("Recording saved successfully! Students can now access the Google Drive link."),z(!1),setTimeout(()=>{M?.(e),s()},2e3)},onError:e=>{q(e.message||"Failed to save recording. Please try again."),z(!1),P(0)}}),ve=e=>{if(!e)return"0 MB";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["B","KB","MB","GB"][a]},fe=l.useMemo(()=>[{value:"english",label:"English"},{value:"english_literature",label:"English Literature"},{value:"english_language",label:"English Language"},{value:"communications",label:"Communications"},{value:"general",label:"General Session"},{value:"mathematics",label:"Mathematics"},{value:"algebra",label:"Algebra"},{value:"geometry",label:"Geometry"},{value:"calculus",label:"Calculus"},{value:"statistics",label:"Statistics"},{value:"trigonometry",label:"Trigonometry"},{value:"physics",label:"Physics"},{value:"chemistry",label:"Chemistry"},{value:"biology",label:"Biology"},{value:"environmental_science",label:"Environmental Science"},{value:"earth_science",label:"Earth Science"},{value:"history",label:"History"},{value:"geography",label:"Geography"},{value:"civics",label:"Civics"},{value:"economics",label:"Economics"},{value:"political_science",label:"Political Science"},{value:"spanish",label:"Spanish"},{value:"french",label:"French"},{value:"german",label:"German"},{value:"mandarin",label:"Mandarin Chinese"},{value:"japanese",label:"Japanese"},{value:"art",label:"Art"},{value:"music",label:"Music"},{value:"drama",label:"Drama"},{value:"philosophy",label:"Philosophy"},{value:"computer_science",label:"Computer Science"},{value:"programming",label:"Programming"},{value:"web_development",label:"Web Development"},{value:"data_science",label:"Data Science"},{value:"business_studies",label:"Business Studies"},{value:"accounting",label:"Accounting"},{value:"marketing",label:"Marketing"},{value:"physical_education",label:"Physical Education"},{value:"health_education",label:"Health Education"},{value:"career_guidance",label:"Career Guidance"}],[]),ye=l.useMemo(()=>[{value:"360p",label:"360p - Mobile (Low Quality)"},{value:"480p",label:"480p - Standard Definition"},{value:"720p",label:"720p - High Definition"},{value:"1080p",label:"1080p - Full HD"},{value:"4k",label:"4K - Ultra HD"}],[]),je=l.useMemo(()=>[{value:"private",label:"Private - Only me"},{value:"unlisted",label:"Unlisted - Anyone with link"},{value:"public",label:"Public - Visible to all students"}],[]),ke=l.useMemo(()=>()=>e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-3",children:"Google Meet Recording Workflow"}),e.jsx("div",{className:"space-y-2",children:n.recordingWorkflow.getRecordingSteps().map((a,r)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium "+(r<=W?"bg-blue-500 text-white":"bg-blue-200 dark:bg-blue-800 text-blue-600 dark:text-blue-400"),children:r+1}),e.jsx("p",{className:"text-sm "+(r<=W?"text-blue-800 dark:text-blue-200":"text-blue-600 dark:text-blue-400"),children:a})]},r))})]}),[W]);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto transform transition-all duration-300 scale-100",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(u,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Add Recording"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Link your Google Drive recording (session is optional)"})]})]}),e.jsx("button",{onClick:s,disabled:E,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(m,{size:24})})]}),E&&e.jsxs("div",{className:"px-6 pt-4",children:[e.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${$}%`}})}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 text-center",children:$<100?"Saving recording to database...":"Recording saved successfully!"})]}),R&&e.jsxs("div",{className:"mx-6 mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start space-x-3 animate-slide-down",children:[e.jsx(x,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm flex-1",children:R}),e.jsx("button",{onClick:()=>q(""),className:"text-red-500 hover:text-red-700 flex-shrink-0",children:e.jsx(m,{size:16})})]}),U&&e.jsxs("div",{className:"mx-6 mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl flex items-start space-x-3 animate-slide-down",children:[e.jsx(g,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm flex-1",children:U})]}),e.jsx("div",{className:"px-6 pt-4",children:e.jsx(ke,{})}),e.jsxs("form",{onSubmit:ee(async e=>{try{q(""),I(""),z(!0);const a=(()=>{P(0);const e=setInterval(()=>{P(a=>a>=90?(clearInterval(e),90):a+10)},200);return e})();if(!e.recordingUrl)throw new Error("Google Drive link is required");if(!H.isValid)throw new Error("Please enter a valid Google Drive link");if(!e.title.trim())throw new Error("Recording title is required");e.meetLink||(e.meetLink="");const r=await pe.mutateAsync(e);return clearInterval(a),P(100),r}catch(a){q(a.message||"Failed to save recording. Please try again."),z(!1),P(0)}}),className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white",children:"Link to Google Meet Session (Optional)"}),_?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Loading Google Meet sessions..."})]}):0!==F.length||V?e.jsx(o,{options:F.map(e=>({value:e.id,label:`${e.title} - ${e.scheduledTime?.toLocaleDateString()}`,disabled:"available"===e.recordingStatus})),value:de.sessionId,onChange:ne,placeholder:"Select a Google Meet session (optional)...",disabled:E||!!V,error:ae.sessionId?.message}):e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:e.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"No Google Meet sessions found. You can create a standalone recording without linking to a session."})}),T&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(b,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:T.title}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm text-blue-700 dark:text-blue-300",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:T.scheduledTime?.toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:T.scheduledTime?.toLocaleTimeString()})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:T.instructorName})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{className:"capitalize",children:T.status})]})]}),T.meetLink&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:T.meetLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[e.jsx(y,{size:14}),e.jsx("span",{children:"Join Google Meet"})]})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(S,{label:"Recording Title *",type:"text",placeholder:"Enter recording title...",error:ae.title?.message,disabled:E,required:!0,icon:j,autoFocus:!T,ref:K,...X("title",{required:"Recording title is required",minLength:{value:3,message:"Title must be at least 3 characters"},maxLength:{value:100,message:"Title cannot exceed 100 characters"}})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(D,{label:"Description",rows:3,placeholder:"Describe the recording content...",error:ae.description?.message,disabled:E,ref:Y,...X("description",{maxLength:{value:500,message:"Description cannot exceed 500 characters"}})})}),e.jsx("div",{children:e.jsx(S,{label:"Google Meet Link (Optional)",type:"url",placeholder:"https://meet.google.com/...",error:ae.meetLink?.message,disabled:E||!!T,icon:u,...X("meetLink",{pattern:{value:/https:\/\/meet\.google\.com\/[a-z-]+/,message:"Please enter a valid Google Meet link"}})})}),e.jsx(o,{label:"Subject *",options:fe,value:de.category,onChange:me,disabled:E,error:ae.category?.message,icon:k}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx(S,{label:"Google Drive Recording Link *",type:"url",placeholder:"https://drive.google.com/file/d/...",error:ae.recordingUrl?.message||H.error&&!H.isValid,disabled:E,icon:N,required:!0,ref:Z,autoFocus:!!T,...X("recordingUrl",{required:"Google Drive link is required",pattern:{value:/https:\/\/drive\.google\.com\/(file\/d\/|open\?id=)([a-zA-Z0-9_-]+)/,message:"Please enter a valid Google Drive link"}})}),H.isValid&&e.jsx("div",{className:"mt-3 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(g,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Valid Google Drive Link"}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["File ID: ",H.fileId]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("a",{href:H.viewUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 px-3 py-1 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors",children:[e.jsx(w,{size:14}),e.jsx("span",{children:"View"})]}),e.jsxs("a",{href:H.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 px-3 py-1 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-colors",children:[e.jsx(N,{size:14}),e.jsx("span",{children:"Download"})]})]})]})}),H.error&&!H.isValid&&de.recordingUrl&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"h-4 w-4 text-red-500"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:H.error})]})}),e.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"How to get your Google Drive link:"}),e.jsx("br",{}),"1. Go to drive.google.com",e.jsx("br",{}),'2. Find your recording in "Meet Recordings" folder',e.jsx("br",{}),'3. Right-click → "Share" → "Copy link"',e.jsx("br",{}),"4. Paste the link above"]})})]}),e.jsx("div",{children:e.jsx(S,{label:"Duration (minutes) *",type:"number",placeholder:"Duration in minutes",min:"1",max:"480",error:ae.duration?.message,disabled:E,suffix:"minutes",icon:h,...X("duration",{required:"Duration is required",min:{value:1,message:"Duration must be at least 1 minute"},max:{value:480,message:"Duration cannot exceed 8 hours"}}),onChange:e=>ce(e.target.value)})}),e.jsx(o,{label:"Quality",options:ye,value:de.quality,onChange:ue,disabled:E,error:ae.quality?.message}),e.jsxs("div",{children:[e.jsx(S,{label:"File Size (MB)",type:"number",placeholder:"File size in MB",min:"0",error:ae.fileSize?.message,disabled:!0,suffix:"MB",...X("fileSize")}),de.fileSize>0&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[ve(1024*de.fileSize*1024)," • Auto-calculated"]})]}),e.jsx(o,{label:"Visibility *",options:je,value:de.visibility,onChange:xe,disabled:E,error:ae.visibility?.message})]}),e.jsxs("div",{children:[e.jsx(S,{label:"Tags",type:"text",placeholder:"math, algebra, lecture (comma separated)",error:ae.tags?.message,disabled:E,...X("tags",{validate:e=>{if(!e)return!0;const a="string"==typeof e?e.split(",").map(e=>e.trim()).filter(Boolean):Array.isArray(e)?e:[];return a.length>10?"Maximum 10 tags allowed":!a.some(e=>e.length>20)||"Each tag must be less than 20 characters"}})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Add relevant tags to help students find this recording"})]}),(de.duration>0||de.fileSize>0)&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Recording Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[de.duration>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Duration: ",(e=>{if(!e)return"0:00";const a=Math.floor(e/60),r=Math.floor(e%60);return a>0?`${a}:${r.toString().padStart(2,"0")}:00`:`${r}:00`})(de.duration)]})]}),de.fileSize>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Size: ",ve(1024*de.fileSize*1024)]})]}),de.quality&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Quality: ",de.quality.toUpperCase()]})]}),de.category&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Subject: ",fe.find(e=>e.value===de.category)?.label]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(d,{type:"button",variant:"outline",onClick:s,disabled:E,className:"w-full sm:w-auto",children:"Cancel"}),e.jsx(d,{type:"submit",disabled:E||!re||!se||!H.isValid,loading:E,className:"w-full sm:w-auto bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",icon:f,children:E?"Saving...":"Save Recording"})]})]})]})})};export{M as C};
