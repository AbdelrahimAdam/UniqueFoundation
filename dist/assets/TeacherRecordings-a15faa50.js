import{u as e,j as s,L as r}from"./index-fde0d62d.js";import{r as t}from"./vendor-0a74ad82.js";import"./firebase-383b8577.js";import{r as a}from"./recordingService-ea5c15f3.js";import{c as l,B as i}from"./Button-e4864804.js";import{C as d}from"./CreateRecordingModal-755b7a25.js";import{u as o}from"./useTranslation-b39a34c2.js";import{P as n}from"./plus-bf6b85bd.js";import{V as c}from"./video-0db73cd2.js";import{C as x}from"./check-circle-bee84931.js";import{E as m}from"./eye-e541892e.js";import{C as g}from"./clock-ef5a2b60.js";import{S as h}from"./search-6717dbe2.js";import{F as u}from"./filter-80a6ecdb.js";import{C as p}from"./calendar-7494118b.js";import{F as b}from"./file-text-6c907fbf.js";import{P as j}from"./play-circle-3e70d83b.js";import{D as f}from"./download-d1e15a84.js";import{X as y}from"./x-circle-ce3b4964.js";import"./router-80e9042b.js";import"./index.esm-e04fd8e7.js";import"./Select-f5fa357c.js";import"./utils-db1934d6.js";import"./chevron-down-573d0298.js";import"./alert-circle-e10dc133.js";import"./check-9b2fada3.js";import"./x-c1108be6.js";import"./user-4c280f79.js";import"./link-601684f1.js";import"./book-open-f786a2db.js";import"./external-link-6b778f44.js";import"./upload-2b7035eb.js";const w=l("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),v=()=>{o();const{user:l}=e(),[v,N]=t.useState([]),[k,S]=t.useState(!0),[C,P]=t.useState(""),[M,L]=t.useState("all"),[U,B]=t.useState(!1),[R,z]=t.useState({}),[T,$]=t.useState(!1),E=l?.uid;t.useEffect(()=>{const e=()=>{$(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),t.useEffect(()=>(document.body.style.overflow=U?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[U]),t.useEffect(()=>{E&&A()},[E]);const A=async()=>{try{S(!0);const e=(await a.getAllRecordings()).filter(e=>e.teacherId===E||e.createdBy===E);N(e)}catch(e){}finally{S(!1)}},D=e=>{e&&(e.preventDefault(),e.stopPropagation()),B(!0)},F=v.filter(e=>{const s=e.title?.toLowerCase().includes(C.toLowerCase())||e.description?.toLowerCase().includes(C.toLowerCase())||e.tags?.some(e=>e.toLowerCase().includes(C.toLowerCase())),r="all"===M||e.status===M||"published"===M&&e.isPublished||"unpublished"===M&&!e.isPublished;return s&&r}),V=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"recording":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"processing":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},I=e=>{if(!e)return"0:00";const s=Math.floor(e/3600),r=Math.floor(e%3600/60),t=Math.floor(e%60);return s>0?`${s}:${r.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`:`${r}:${t.toString().padStart(2,"0")}`},W=e=>{if(!e)return"0 B";const s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["B","KB","MB","GB"][s]},_={total:v.length,published:v.filter(e=>e.isPublished).length,totalViews:v.reduce((e,s)=>e+(s.views||0),0),inProgress:v.filter(e=>"recording"===e.status||"processing"===e.status).length};return k?s.jsx("div",{className:"flex items-center justify-center min-h-96",children:s.jsx(r,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[U&&s.jsx(d,{onClose:()=>{B(!1)},onSuccess:()=>{B(!1),A()}}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"My Recordings"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm sm:text-base",children:"Manage and publish your recording sessions"})]}),s.jsxs("button",{className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-3 rounded-xl font-medium flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 touch-manipulation",onClick:D,onTouchStart:e=>e.currentTarget.classList.add("active:scale-95"),children:[s.jsx(n,{className:"h-4 w-4 mr-2"}),"New Recording"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:_.total})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(c,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Published"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:_.published})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(x,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600 dark:text-green-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Views"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:_.totalViews})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:s.jsx(m,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600 dark:text-purple-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"In Progress"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:_.inProgress})]}),s.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:s.jsx(g,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-600 dark:text-yellow-400"})})]})})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search recordings...",value:C,onChange:e=>P(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("select",{value:M,onChange:e=>L(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"unpublished",children:"Unpublished"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"recording",children:"Recording"}),s.jsx("option",{value:"processing",children:"Processing"}),s.jsx("option",{value:"failed",children:"Failed"})]}),s.jsxs(i,{variant:"outline",children:[s.jsx(u,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]})}),s.jsx("div",{className:"space-y-4",children:F.map(e=>{const r=(e=>{switch(e){case"completed":return x;case"recording":return j;case"processing":return g;case"failed":return y;default:return c}})(e.status),t=e.isPublished,l="processing"===e.status,d="completed"===e.status;return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-4 sm:p-6 hover:shadow-xl transition-all duration-300",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"p-3 rounded-lg "+(d?"bg-green-100 dark:bg-green-900/30":l?"bg-yellow-100 dark:bg-yellow-900/30":"bg-blue-100 dark:bg-blue-900/30"),children:s.jsx(r,{className:"h-6 w-6 "+(d?"text-green-600 dark:text-green-400":l?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400")})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.title}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${V(e.status)}`,children:e.status}),t&&s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Published"})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 text-sm sm:text-base",children:e.description||"No description provided"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-6 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(p,{className:"h-4 w-4 mr-2"}),e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown date"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(g,{className:"h-4 w-4 mr-2"}),I(e.duration)]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(m,{className:"h-4 w-4 mr-2"}),e.views||0," views"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(b,{className:"h-4 w-4 mr-2"}),W(e.fileSize)]})]}),e.tags&&e.tags.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.tags.slice(0,3).map((e,r)=>s.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-xs",children:["#",e]},r)),e.tags.length>3&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-xs",children:["+",e.tags.length-3," more"]})]})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[e.recordingUrl&&s.jsx("a",{href:e.recordingUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 sm:flex-none",children:s.jsxs(i,{className:"w-full sm:w-auto",children:[s.jsx(j,{className:"h-4 w-4 mr-2"}),"Watch"]})}),s.jsxs("div",{className:"flex space-x-2",children:[e.downloadUrl&&s.jsx(i,{variant:"outline",size:"sm",onClick:()=>(async e=>{e.downloadUrl&&window.open(e.downloadUrl,"_blank")})(e),children:s.jsx(f,{className:"h-4 w-4"})}),s.jsx(i,{variant:"outline",size:"sm",onClick:()=>(async e=>{if(navigator.share&&e.recordingUrl)try{await navigator.share({title:e.title,text:e.description,url:e.recordingUrl})}catch(s){}else e.recordingUrl&&(navigator.clipboard.writeText(e.recordingUrl),alert("Recording link copied to clipboard!"))})(e),children:s.jsx(w,{className:"h-4 w-4"})}),t?s.jsx(i,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{z(s=>({...s,[e]:!0})),await a.unpublishRecording(e),await A()}catch(s){}finally{z(s=>({...s,[e]:!1}))}})(e.id),disabled:R[e.id],className:"text-red-600 border-red-300 hover:bg-red-50 dark:text-red-400 dark:border-red-600 dark:hover:bg-red-900/20",children:s.jsx(y,{className:"h-4 w-4"})}):s.jsx(i,{size:"sm",onClick:()=>(async e=>{try{z(s=>({...s,[e]:!0})),await a.publishRecording(e),await A()}catch(s){}finally{z(s=>({...s,[e]:!1}))}})(e.id),disabled:R[e.id]||"completed"!==e.status,className:"bg-green-600 hover:bg-green-700",children:s.jsx(x,{className:"h-4 w-4"})})]})]})]})},e.id)})}),0===F.length&&s.jsxs("div",{className:"text-center py-8 sm:py-12",children:[s.jsx(c,{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No recordings found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm sm:text-base",children:C||"all"!==M?"Try adjusting your search or filters":"Get started by creating your first recording"}),s.jsxs("button",{className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-3 rounded-xl font-medium flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 touch-manipulation mx-auto",onClick:D,children:[s.jsx(n,{className:"h-4 w-4 mr-2"}),"Create Recording"]})]})]})};export{v as default};
