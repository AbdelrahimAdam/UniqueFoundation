var e=Object.defineProperty,r=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(r,a,t)=>a in r?e(r,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[a]=t,d=(e,r)=>{for(var a in r||(r={}))s.call(r,a)&&i(e,a,r[a]);if(t)for(var a of t(r))l.call(r,a)&&i(e,a,r[a]);return e},c=(e,t)=>r(e,a(t));import{j as n,L as o}from"./index-CI4zpFZI.js";import{r as x}from"./router-C3Im-STG.js";import{u as m}from"./userService-DSfDdgOB.js";import"./firebase-BFqJWPH6.js";import{B as p}from"./Button-ye-G-80u.js";import{R as g,k as y,g as h,X as u}from"./ui-BAjx5vmw.js";import"./vendor-BhyxaAfg.js";import"./utils-nJVaOoPq.js";const j=()=>{const[e,r]=x.useState([]),[a,t]=x.useState(!0),[s,l]=x.useState(""),[i,j]=x.useState({});x.useEffect(()=>{b()},[]);const b=async()=>{try{t(!0);const e=await m.getAllUsers();r(e)}catch(e){}finally{t(!1)}},f=e.filter(e=>{var r,a;return(null==(r=e.displayName)?void 0:r.toLowerCase().includes(s.toLowerCase()))||(null==(a=e.email)?void 0:a.toLowerCase().includes(s.toLowerCase()))});return a?n.jsx("div",{className:"flex items-center justify-center min-h-96",children:n.jsx(o,{size:"lg"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"User Management"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage all user accounts and permissions"})]}),n.jsxs(p,{onClick:b,variant:"outline",children:[n.jsx(g,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"relative",children:[n.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:s,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:f.map(e=>{var r,a;return n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:(null==(r=e.displayName)?void 0:r.charAt(0))||(null==(a=e.email)?void 0:a.charAt(0))}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.displayName||"No Name"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+("admin"===e.role?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"teacher"===e.role?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"),children:e.role})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"),children:e.isActive?"Active":"Pending"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[!e.isActive&&n.jsxs(p,{size:"sm",onClick:()=>(async e=>{try{j(r=>c(d({},r),{[e]:!0})),await m.approveUser(e),await b()}catch(r){}finally{j(r=>c(d({},r),{[e]:!1}))}})(e.id),disabled:i[e.id],children:[n.jsx(h,{className:"h-3 w-3 mr-1"}),"Approve"]}),n.jsxs(p,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{j(r=>c(d({},r),{[e]:!0})),await m.deactivateUser(e),await b()}catch(r){}finally{j(r=>c(d({},r),{[e]:!1}))}})(e.id),disabled:i[e.id],children:[n.jsx(u,{className:"h-3 w-3 mr-1"}),e.isActive?"Deactivate":"Delete"]})]})})]},e.id)})})]})})})]})};export{j as default};
