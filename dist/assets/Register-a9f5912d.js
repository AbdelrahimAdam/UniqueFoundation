var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(a,r,t)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,o=(e,a)=>{for(var r in a||(a={}))s.call(a,r)&&l(e,r,a[r]);if(t)for(var r of t(a))i.call(a,r)&&l(e,r,a[r]);return e},d=(e,t)=>a(e,r(t));import{u as n,j as c}from"./index-c63f14c2.js";import{r as u}from"./vendor-c3615fdd.js";import{u as m}from"./index.esm-c19471e5.js";import{u as g,L as x}from"./router-4adec120.js";import{B as h}from"./Button-4635154f.js";import{I as p}from"./Input-fbeac968.js";import{u as b}from"./useTranslation-89f0f982.js";import{U as f,M as v,L as y,E as j,a as w}from"./ui-e3d8d230.js";import"./firebase-9a5fb30d.js";import"./utils-5b9d0682.js";const N=()=>{var e,a,r,t,s;const{t:i}=b(),{register:l}=n(),N=g(),[k,P]=u.useState(!1),[C,L]=u.useState(!1),[S,q]=u.useState(!1),[z,A]=u.useState(""),[O,R]=u.useState(""),[E,I]=u.useState("student"),{register:T,handleSubmit:F,formState:{errors:M},watch:B}=m(),Z=B("password");return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-6",children:c.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-16 w-16 rounded-full object-cover"})}),c.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i("auth.register","Create your account")}),c.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:i("auth.registerSubtitle","Create your account to get started.")})]}),O&&c.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:O})})]})}),z&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:z})})]})}),c.jsxs("div",{className:"flex space-x-4 rtl:space-x-reverse",children:[c.jsx("button",{type:"button",onClick:()=>I("teacher"),className:"flex-1 py-2 px-4 rounded-lg border-2 transition-colors "+("teacher"===E?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500"),children:i("auth.registerAsTeacher","Teacher")}),c.jsx("button",{type:"button",onClick:()=>I("student"),className:"flex-1 py-2 px-4 rounded-lg border-2 transition-colors "+("student"===E?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500"),children:i("auth.registerAsStudent","Student")})]}),c.jsxs("form",{className:"mt-8 space-y-6",onSubmit:F(async e=>{q(!0),A(""),R("");try{const a=await l(e.email,e.password,{firstName:e.firstName,lastName:e.lastName,role:E});a.success?a.requiresApproval?R(a.message||i("auth.registrationSuccess","Registration successful! Please wait for admin approval before logging in.")):(R(i("auth.registrationSuccessAuto","Registration successful! Redirecting to dashboard...")),setTimeout(()=>N("/dashboard"),2e3)):A(a.error||i("auth.registrationFailed","Registration failed. Please try again."))}catch(a){const e=(e=>{switch(e.code){case"auth/email-already-in-use":return i("auth.emailInUse","This email is already registered. Please use a different email or sign in.");case"auth/invalid-email":return i("auth.invalidEmail","The email address is not valid.");case"auth/operation-not-allowed":return i("auth.operationNotAllowed","Email/password accounts are not enabled. Please contact support.");case"auth/weak-password":return i("auth.weakPassword","The password is too weak. Please use a stronger password.");case"auth/network-request-failed":return i("auth.networkError","Network error. Please check your connection and try again.");default:return e.message||i("auth.registrationFailed","Registration failed. Please try again.")}})(a);A(e)}finally{q(!1)}}),children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(p,d(o({label:i("auth.firstName","First Name"),type:"text",autoComplete:"given-name",placeholder:"John",icon:c.jsx(f,{size:18,className:"text-gray-400"})},T("firstName",{required:i("validation.required",{field:"First Name"}),minLength:{value:2,message:i("validation.minLength",{field:"First Name",min:2})}})),{error:null==(e=M.firstName)?void 0:e.message})),c.jsx(p,d(o({label:i("auth.lastName","Last Name"),type:"text",autoComplete:"family-name",placeholder:"Doe"},T("lastName",{required:i("validation.required",{field:"Last Name"}),minLength:{value:2,message:i("validation.minLength",{field:"Last Name",min:2})}})),{error:null==(a=M.lastName)?void 0:a.message}))]}),c.jsx(p,d(o({label:i("auth.email","Email address"),type:"email",autoComplete:"email",placeholder:"your@email.com",icon:c.jsx(v,{size:18,className:"text-gray-400"})},T("email",{required:i("validation.required",{field:"Email"}),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:i("validation.invalidEmail","Invalid email address")}})),{error:null==(r=M.email)?void 0:r.message})),c.jsx(p,d(o({label:i("auth.password","Password"),type:k?"text":"password",autoComplete:"new-password",placeholder:"••••••••",icon:c.jsx(y,{size:18,className:"text-gray-400"}),trailingIcon:c.jsx("button",{type:"button",onClick:()=>P(!k),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:k?c.jsx(j,{size:18}):c.jsx(w,{size:18})})},T("password",{required:i("validation.required",{field:"Password"}),minLength:{value:6,message:i("validation.minLength",{field:"Password",min:6})}})),{error:null==(t=M.password)?void 0:t.message})),c.jsx(p,d(o({label:i("auth.confirmPassword","Confirm Password"),type:C?"text":"password",autoComplete:"new-password",placeholder:"••••••••",icon:c.jsx(y,{size:18,className:"text-gray-400"}),trailingIcon:c.jsx("button",{type:"button",onClick:()=>L(!C),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:C?c.jsx(j,{size:18}):c.jsx(w,{size:18})})},T("confirmPassword",{required:i("validation.required",{field:"Confirm Password"}),validate:e=>e===Z||i("validation.passwordsMatch","Passwords must match")})),{error:null==(s=M.confirmPassword)?void 0:s.message}))]}),c.jsx(h,{type:"submit",className:"w-full",loading:S,disabled:S,children:S?i("auth.creatingAccount","Creating account..."):i("auth.register","Create account")}),c.jsx("div",{className:"text-center",children:c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i("auth.hasAccount","Already have an account?")," ",c.jsx(x,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:i("auth.login","Sign in")})]})})]})]})})};export{N as default};
