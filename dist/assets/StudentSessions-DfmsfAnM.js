import{e,r as s,j as r,C as a,p as t,J as l,K as d,H as i,I as n,l as c,V as x}from"./vendor-react-UVl3l3eP.js";import{u as o,L as g}from"./index-DEgoYGZl.js";import"./firebase-DbUGxvwD.js";import{s as m}from"./sessionService-C_bGmzpN.js";import{B as h}from"./Button-BII5FLFC.js";import"./vendor-BMEBppWF.js";import"./i18n-CsgR-yW4.js";const u=()=>{const{t:u}=e(),{user:b}=o(),[j,p]=s.useState([]),[y,v]=s.useState(!0),[N,f]=s.useState(""),[w,k]=s.useState("all"),L=null==b?void 0:b.uid;s.useEffect(()=>{L&&C()},[L]);const C=async()=>{try{v(!0);const e=await m.getPublicSessions();p(e)}catch(e){}finally{v(!1)}},S=j.filter(e=>{var s,r,a,t;const l=(null==(s=e.title)?void 0:s.toLowerCase().includes(N.toLowerCase()))||(null==(r=e.topic)?void 0:r.toLowerCase().includes(N.toLowerCase()))||(null==(a=e.description)?void 0:a.toLowerCase().includes(N.toLowerCase()))||(null==(t=e.instructorName)?void 0:t.toLowerCase().includes(N.toLowerCase())),d="all"===w||e.status===w;return l&&d}),T=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"live":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},D={upcoming:j.filter(e=>"scheduled"===e.status).length,live:j.filter(e=>"live"===e.status).length,completed:j.filter(e=>"completed"===e.status).length};return y?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsx(g,{size:"lg"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Learning Sessions"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Join live sessions and access recordings"})]}),r.jsxs(h,{onClick:C,variant:"outline",children:[r.jsx(a,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Upcoming"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:D.upcoming})]}),r.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(t,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Live Now"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:D.live})]}),r.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-lg",children:r.jsx(l,{className:"h-6 w-6 text-red-600 dark:text-red-400"})})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Completed"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:D.completed})]}),r.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:r.jsx(d,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search sessions...",value:N,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsxs("select",{value:w,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Sessions"}),r.jsx("option",{value:"scheduled",children:"Upcoming"}),r.jsx("option",{value:"live",children:"Live Now"}),r.jsx("option",{value:"completed",children:"Completed"})]}),r.jsxs(h,{variant:"outline",children:[r.jsx(n,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]})}),r.jsx("div",{className:"space-y-4",children:S.map(e=>{const s=(e=>{switch(e){case"scheduled":return t;case"live":return l;case"completed":return d;default:return a}})(e.status),i="live"===e.status,n="scheduled"===e.status,o=e.recordingUrl;return r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-xl transition-all duration-300",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[r.jsx("div",{className:"p-3 rounded-lg "+(i?"bg-red-100 dark:bg-red-900/30":n?"bg-blue-100 dark:bg-blue-900/30":"bg-green-100 dark:bg-green-900/30"),children:r.jsx(s,{className:"h-6 w-6 "+(i?"text-red-600 dark:text-red-400":n?"text-blue-600 dark:text-blue-400":"text-green-600 dark:text-green-400")})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.title||e.topic}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${T(e.status)}`,children:e.status})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:e.description}),r.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 dark:text-gray-400 mb-3",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(c,{className:"h-4 w-4 mr-2"}),e.instructorName]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(t,{className:"h-4 w-4 mr-2"}),e.scheduledTime?new Date(e.scheduledTime).toLocaleDateString():"TBD"]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(a,{className:"h-4 w-4 mr-2"}),e.scheduledTime?new Date(e.scheduledTime).toLocaleTimeString():"TBD"]})]}),o&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(x,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Recording available"})]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[(i||n)&&r.jsxs(h,{onClick:()=>(e=>{(e.meetLink||e.googleMeetLink)&&window.open(e.meetLink||e.googleMeetLink,"_blank")})(e),className:i?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(l,{className:"h-4 w-4 mr-2"}),i?"Join Live":"Join"]}),o&&"completed"===e.status&&r.jsx("a",{href:e.recordingUrl,target:"_blank",rel:"noopener noreferrer",children:r.jsxs(h,{variant:"outline",children:[r.jsx(x,{className:"h-4 w-4 mr-2"}),"Watch Recording"]})})]})]})},e.id)})}),0===S.length&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(t,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No sessions found"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:N||"all"!==w?"Try adjusting your search or filters":"No sessions are currently available"})]})]})};export{u as default};
