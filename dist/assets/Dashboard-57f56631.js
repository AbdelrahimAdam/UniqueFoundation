import{u as e,j as t,L as s}from"./index-fde0d62d.js";import{r}from"./vendor-0a74ad82.js";import{r as a}from"./recordingService-ea5c15f3.js";import{s as n}from"./sessionService-e4efedfb.js";import"./firebase-383b8577.js";import{c as o}from"./Button-e4864804.js";import{u as l}from"./useTranslation-b39a34c2.js";import{u as i}from"./router-80e9042b.js";import{P as d}from"./play-circle-3e70d83b.js";import{V as c}from"./video-0db73cd2.js";import{U as g}from"./users-dacba3b8.js";import{E as m}from"./eye-e541892e.js";import{S as x}from"./star-87c5b8d4.js";import{P as h}from"./plus-bf6b85bd.js";import{B as u}from"./book-open-f786a2db.js";import{B as b}from"./bar-chart-3-c0cb83cc.js";import{S as p}from"./settings-58b5ca2e.js";import{T as y}from"./trending-up-a9e06369.js";import{C as f}from"./calendar-7494118b.js";import{A as j}from"./award-c54889ea.js";import{R as w}from"./refresh-cw-36e681e5.js";const v=o("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),N=()=>{const{t:o}=l(),{user:N,userProfile:k}=e(),S=i(),[C,T]=r.useState({totalRecordings:0,published:0,inProgress:0,totalViews:0,totalSessions:0,upcomingSessions:0,totalStudents:0,completionRate:0,avgAttendance:0,studentSatisfaction:0}),[A,R]=r.useState([]),[M,D]=r.useState([]),[E,$]=r.useState(!0),[L,P]=r.useState(!1),V=N?.uid;r.useEffect(()=>{const e=()=>{P(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.useEffect(()=>{V&&B()},[V]);const B=async()=>{try{$(!0);const[e,t]=await Promise.all([a.getAllRecordings(),n.getAllSessions({limit:10})]),s=e.filter(e=>e.teacherId===V||e.createdBy===V),r=t.filter(e=>e.createdBy===V||e.teacherId===V),o=s.length,l=s.filter(e=>e.isPublished).length,i=s.filter(e=>"recording"===e.status||"processing"===e.status).length,d=s.reduce((e,t)=>e+(t.views||0),0),c=r.length,g=r.filter(e=>"scheduled"===e.status&&new Date(e.scheduledTime)>new Date).length,m=r.filter(e=>"completed"===e.status).length,x=c>0?Math.round(m/c*100):0,h=r.filter(e=>e.attendanceRate),u=h.length>0?Math.round(h.reduce((e,t)=>e+(t.attendanceRate||0),0)/h.length):75,b=r.filter(e=>e.rating),p=b.length>0?Math.round(b.reduce((e,t)=>e+(t.rating||0),0)/b.length*10)/10:4.5,y=new Set;r.forEach(e=>{e.enrolledStudents&&e.enrolledStudents.forEach(e=>y.add(e))});const f=y.size;T({totalRecordings:o,published:l,inProgress:i,totalViews:d,totalSessions:c,upcomingSessions:g,totalStudents:f,completionRate:x,avgAttendance:u,studentSatisfaction:p});const j=r.sort((e,t)=>new Date(t.scheduledTime||t.createdAt)-new Date(e.scheduledTime||e.createdAt)).slice(0,5);R(j);const w=z(r);D(w)}catch(e){}finally{$(!1)}},z=e=>{const t=(new Date).getMonth();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].slice(Math.max(0,t-5),t+1).map((s,r)=>{const a=(t-5+r+12)%12,n=(new Date).getFullYear()-(t-5+r<0?1:0),o=e.filter(e=>{const t=new Date(e.scheduledTime||e.createdAt);return t.getMonth()===a&&t.getFullYear()===n}),l=new Set;return o.forEach(e=>{e.enrolledStudents&&e.enrolledStudents.forEach(e=>l.add(e))}),{month:s,sessions:o.length,students:l.size}})},Q=[{name:o("teacher.stats.totalSessions","Total Sessions"),value:C.totalSessions.toString(),icon:d,change:`${C.upcomingSessions} upcoming`,changeType:"positive",color:"from-blue-500 to-cyan-500",bgColor:"bg-blue-100 dark:bg-blue-900/30",textColor:"text-blue-600 dark:text-blue-400"},{name:o("teacher.stats.totalRecordings","Total Recordings"),value:C.totalRecordings.toString(),icon:c,change:`${C.published} published`,changeType:"positive",color:"from-green-500 to-emerald-500",bgColor:"bg-green-100 dark:bg-green-900/30",textColor:"text-green-600 dark:text-green-400"},{name:o("teacher.stats.totalStudents","Total Students"),value:C.totalStudents.toString(),icon:g,change:"Active learners",changeType:"positive",color:"from-purple-500 to-pink-500",bgColor:"bg-purple-100 dark:bg-purple-900/30",textColor:"text-purple-600 dark:text-purple-400"},{name:o("teacher.stats.totalViews","Total Views"),value:C.totalViews.toLocaleString(),icon:m,change:"+12% this week",changeType:"positive",color:"from-orange-500 to-red-500",bgColor:"bg-orange-100 dark:bg-orange-900/30",textColor:"text-orange-600 dark:text-orange-400"}],U=[{name:"Completion Rate",value:`${C.completionRate}%`,icon:v,description:"Course completion rate",color:"from-green-500 to-emerald-500",bgColor:"bg-green-50 dark:bg-green-900/20",trend:C.completionRate>80?"+5%":C.completionRate>60?"+2%":"Needs improvement"},{name:"Avg Attendance",value:`${C.avgAttendance}%`,icon:g,description:"Average session attendance",color:"from-blue-500 to-cyan-500",bgColor:"bg-blue-50 dark:bg-blue-900/20",trend:C.avgAttendance>80?"+3%":C.avgAttendance>60?"+1%":"Needs work"},{name:"Student Rating",value:C.studentSatisfaction.toString(),icon:x,description:"Out of 5.0 stars",color:"from-yellow-500 to-orange-500",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",trend:C.studentSatisfaction>4.5?"+0.2":C.studentSatisfaction>4?"+0.1":"Maintain"}],F=[{title:o("session.createNew","Schedule Session"),description:"Create a new teaching session",icon:h,path:"/teacher/sessions",color:"from-blue-500 to-cyan-500",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800"},{title:o("recording.createNew","Create Recording"),description:"Start a new recording session",icon:c,path:"/teacher/recordings",color:"from-green-500 to-emerald-500",bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800"},{title:o("teacher.actions.manageStudents","Manage Students"),description:"View and manage your students",icon:g,path:"/teacher/students",color:"from-purple-500 to-pink-500",bgColor:"bg-purple-50 dark:bg-purple-900/20",borderColor:"border-purple-200 dark:border-purple-800"},{title:"My Courses",description:"Manage your teaching courses",icon:u,path:"/teacher/my-courses",color:"from-orange-500 to-red-500",bgColor:"bg-orange-50 dark:bg-orange-900/20",borderColor:"border-orange-200 dark:border-orange-800"},{title:"View Analytics",description:"Detailed performance insights",icon:b,path:"/teacher/analytics",color:"from-indigo-500 to-purple-500",bgColor:"bg-indigo-50 dark:bg-indigo-900/20",borderColor:"border-indigo-200 dark:border-indigo-800"},{title:"Profile Settings",description:"Update your profile",icon:p,path:"/profile",color:"from-gray-500 to-gray-600",bgColor:"bg-gray-50 dark:bg-gray-900/20",borderColor:"border-gray-200 dark:border-gray-800"}],H=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"live":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},I=e=>{if(!e)return"TBD";const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},J={teachingHours:Math.round(1.5*C.totalSessions),studentEngagement:Math.min(100,Math.round(1.1*C.avgAttendance)),contentQuality:C.studentSatisfaction,responseTime:2.1},O=()=>{const e=Math.max(...M.map(e=>e.sessions),1),s=Math.max(...M.map(e=>e.students),1);return t.jsxs("div",{className:"space-y-2",children:[M.map((r,a)=>t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-8",children:r.month}),t.jsxs("div",{className:"flex-1 flex space-x-1",children:[t.jsx("div",{className:"bg-blue-500 rounded h-4 flex items-center justify-center",style:{width:r.sessions/e*100+"%"},children:t.jsx("span",{className:"text-xs text-white px-1",children:r.sessions})}),t.jsx("div",{className:"bg-green-500 rounded h-4 flex items-center justify-center",style:{width:r.students/s*100+"%"},children:t.jsx("span",{className:"text-xs text-white px-1",children:r.students})})]})]},r.month)),t.jsxs("div",{className:"flex space-x-4 text-xs text-gray-500 dark:text-gray-400 mt-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded mr-1"}),t.jsx("span",{children:"Sessions"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded mr-1"}),t.jsx("span",{children:"Students"})]})]})]})};return E?t.jsx("div",{className:"flex items-center justify-center min-h-96",children:t.jsx(s,{size:"lg"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:o("teacher.dashboard.title","Teacher Dashboard")}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm sm:text-base",children:["Welcome back, ",k?.displayName||"Teacher","! Ready to inspire today?"]})]}),t.jsxs("button",{className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-3 rounded-xl font-medium flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 touch-manipulation",onClick:()=>S("/teacher/sessions"),children:[t.jsx(h,{className:"h-4 w-4 mr-2"}),"Schedule Session"]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:Q.map((e,s)=>{const r=e.icon;return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:`p-2 sm:p-3 rounded-lg ${e.bgColor}`,children:t.jsx(r,{className:`h-5 w-5 sm:h-6 sm:w-6 ${e.textColor}`})}),"positive"===e.changeType&&t.jsx(y,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-500"})]}),t.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-1",children:e.value}),t.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e.name}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.change})]},e.name)})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Quick Actions"}),t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx(d,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map((e,s)=>{const r=e.icon;return t.jsxs("button",{onClick:()=>{return t=e.path,void S(t);var t},className:`p-4 text-left rounded-xl border-2 ${e.borderColor} ${e.bgColor} hover:shadow-lg transition-all duration-200 hover:scale-105 active:scale-95 touch-manipulation`,children:[t.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${e.color} w-10 h-10 flex items-center justify-center mb-3`,children:t.jsx(r,{className:"h-5 w-5 text-white"})}),t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm sm:text-base",children:e.title}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.description})]},e.title)})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Performance Analytics"}),t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:t.jsx(b,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:U.map((e,s)=>{const r=e.icon;return t.jsxs("div",{className:`p-4 rounded-xl border-2 ${e.bgColor} border-transparent`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(r,{className:`h-5 w-5 bg-gradient-to-br ${e.color} text-white p-1 rounded`}),t.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:e.trend})]}),t.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.value}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.name}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.description})]},e.name)})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Monthly Growth"}),t.jsx(O,{})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Sessions"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(f,{className:"h-5 w-5 text-gray-400"}),t.jsx("button",{onClick:()=>{S("/teacher/sessions")},className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"View All"})]})]}),t.jsx("div",{className:"space-y-3",children:A.length>0?A.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors duration-200",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:e.title||e.topic||"Untitled Session"}),t.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:I(e.scheduledTime)}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H(e.status)}`,children:e.status})]})]}),"live"===e.status&&t.jsx("button",{onClick:()=>(e=>{(e.meetLink||e.googleMeetLink)&&window.open(e.meetLink||e.googleMeetLink,"_blank")})(e),className:"ml-2 p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200",children:t.jsx(d,{className:"h-4 w-4"})})]},e.id)):t.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[t.jsx(f,{className:"mx-auto h-8 w-8 mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No recent sessions"}),t.jsx("button",{onClick:()=>S("/teacher/sessions"),className:"mt-2 text-blue-600 dark:text-blue-400 text-sm hover:underline",children:"Schedule your first session"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Performance Summary"}),t.jsx(j,{className:"h-5 w-5 text-yellow-500"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Teaching Hours"}),t.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[J.teachingHours," hrs"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Student Engagement"}),t.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[J.studentEngagement,"%"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Content Quality"}),t.jsxs("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:[J.contentQuality,"/5"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Response Time"}),t.jsxs("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:[J.responseTime," hrs"]})]})]})]})]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsxs("button",{onClick:B,className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-xl font-medium flex items-center transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 touch-manipulation hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx(w,{className:"h-4 w-4 mr-2"}),"Refresh Dashboard"]})})]})};export{N as default};
