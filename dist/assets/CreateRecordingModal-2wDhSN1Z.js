var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(a,r,l)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[r]=l,d=(e,a)=>{for(var r in a||(a={}))s.call(a,r)&&i(e,r,a[r]);if(l)for(var r of l(a))t.call(a,r)&&i(e,r,a[r]);return e},n=(e,a)=>{var r={};for(var i in e)s.call(e,i)&&a.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&l)for(var i of l(e))a.indexOf(i)<0&&t.call(e,i)&&(r[i]=e[i]);return r};import{e as o,a2 as c,r as u,f as x,a3 as m,j as g,V as b,X as h,A as p,K as v,p as y,C as f,U as j,G as k,q as N,k as w,F as S,m as D,D as M,a4 as V,s as L}from"./vendor-react-UVl3l3eP.js";import{u as G}from"./index-DEgoYGZl.js";import{B as q}from"./Button-BII5FLFC.js";import{S as C}from"./Select-DqBXF94C.js";import{r as E}from"./recordingService-DCQSlFNV.js";const z=w.forwardRef((e,a)=>{var r=e,{label:l,type:s="text",placeholder:t,error:i,disabled:o,icon:c,suffix:u,required:x,autoFocus:m=!1}=r,b=n(r,["label","type","placeholder","error","disabled","icon","suffix","required","autoFocus"]);return g.jsxs("div",{className:"space-y-2",children:[l&&g.jsxs("label",{className:"block text-sm font-medium "+(i?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:[l,x&&g.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),g.jsxs("div",{className:"relative",children:[c&&g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(c,{className:"h-5 w-5 text-gray-400"})}),g.jsx("input",d({type:s,className:`w-full px-4 py-3 border ${i?"border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"} rounded-2xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 ${o?"opacity-50 cursor-not-allowed":""} ${c?"pl-10":""} ${u?"pr-16":""}`,placeholder:t,disabled:o,ref:a,autoFocus:m},b)),u&&g.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:g.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:u})})]}),i&&g.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:i})]})}),R=w.forwardRef((e,a)=>{var r=e,{label:l,placeholder:s,error:t,disabled:i,rows:o=3,required:c,autoFocus:u=!1}=r,x=n(r,["label","placeholder","error","disabled","rows","required","autoFocus"]);return g.jsxs("div",{className:"space-y-2",children:[l&&g.jsxs("label",{className:"block text-sm font-medium "+(t?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:[l,c&&g.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),g.jsx("textarea",d({rows:o,className:`w-full px-4 py-3 border ${t?"border-red-300 dark:border-red-700 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500"} rounded-2xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 resize-none ${i?"opacity-50 cursor-not-allowed":""}`,placeholder:s,disabled:i,ref:a,autoFocus:u},x)),t&&g.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:t})]})}),I=({onClose:e,onSuccess:l,sessionId:s=null,initialData:t={}})=>{var i,n,w,I,F,U,P,A,_,$,B,O,T,Q;const{t:H}=o(),{user:W}=G(),K=c(),[Y,J]=u.useState(!1),[Z,X]=u.useState(""),[ee,ae]=u.useState(""),[re,le]=u.useState([]),[se,te]=u.useState(!1),[ie,de]=u.useState(0),[ne,oe]=u.useState(null),[ce,ue]=u.useState(""),[xe,me]=u.useState(0),ge=u.useRef(null),be=u.useRef(null),he=u.useRef(null),{register:pe,handleSubmit:ve,formState:{errors:ye,isDirty:fe,isValid:je},watch:ke,setValue:Ne,reset:we,trigger:Se}=x({mode:"onChange",defaultValues:d({title:t.title||"",description:t.description||"",sessionId:s||t.sessionId||"",meetLink:t.meetLink||"",recordingUrl:t.recordingUrl||"",duration:t.duration||0,fileSize:t.fileSize||0,quality:t.quality||"720p",visibility:t.visibility||"private",category:t.category||"english",tags:Array.isArray(t.tags)?t.tags.join(", "):t.tags||"",instructorEmail:(null==W?void 0:W.email)||"",instructorName:(null==W?void 0:W.displayName)||""},t)}),De=ke(),Me=u.useCallback(e=>{var a;const r=re.find(a=>a.id===e);oe(r),r&&(Ne("title",r.title||`Recording - ${null==(a=r.scheduledTime)?void 0:a.toLocaleDateString()}`,{shouldValidate:!0}),Ne("meetLink",r.meetLink,{shouldValidate:!0}),Ne("instructorEmail",r.instructorEmail,{shouldValidate:!0}),Ne("sessionId",e,{shouldValidate:!0}),Ne("category",r.category||"english",{shouldValidate:!0}),setTimeout(()=>{ge.current&&ge.current.focus()},100))},[re,Ne]),Ve=u.useCallback(e=>{const a=parseInt(e)||0;if(Ne("duration",a,{shouldValidate:!0}),a>0){const e={"360p":50,"480p":100,"720p":250,"1080p":500,"4k":1e3}[De.quality]||250,r=Math.round(a/60*e);Ne("fileSize",r,{shouldValidate:!0})}},[Ne,De.quality]),Le=u.useCallback(e=>{Ne("quality",e,{shouldValidate:!0}),De.duration&&Ve(De.duration)},[Ne,De.duration,Ve]),Ge=u.useCallback(e=>{Ne("category",e,{shouldValidate:!0})},[Ne]),qe=u.useCallback(e=>{Ne("visibility",e,{shouldValidate:!0})},[Ne]);u.useEffect(()=>{Ce()},[]),u.useEffect(()=>{if(s&&re.length>0){const e=re.find(e=>e.id===s);oe(e),e&&(Ne("title",e.title||e.topic,{shouldValidate:!0}),Ne("meetLink",e.meetLink,{shouldValidate:!0}),Ne("instructorEmail",e.instructorEmail,{shouldValidate:!0}),Ne("category",e.category||"english",{shouldValidate:!0}))}},[s,re,Ne]),u.useEffect(()=>{De.recordingUrl?Ee(De.recordingUrl):ue("")},[De.recordingUrl]),u.useEffect(()=>{ce.isValid&&(De.duration&&0!==De.duration||Ne("duration",60,{shouldValidate:!0}),De.duration>0&&Ve(De.duration))},[ce.isValid,De.duration,De.quality,Ne,Ve]);const Ce=async()=>{try{te(!0),X("");const e=await E.getSessionsForRecordingManagement(W.uid);le(e),0!==e.length||s||X("No Google Meet sessions found. You can still create a recording without a session.")}catch(e){X("Failed to load Google Meet sessions. You can still create a recording manually.")}finally{te(!1)}},Ee=e=>{try{if(E.recordingWorkflow.validateDriveUrl(e)){const a=E.extractDriveFileId(e),r=`https://drive.google.com/uc?export=view&id=${a}`,l=`https://drive.google.com/uc?export=download&id=${a}`;ue({isValid:!0,fileId:a,previewUrl:r,downloadUrl:l,viewUrl:`https://drive.google.com/file/d/${a}/view`,type:"google_drive"})}else ue({isValid:!1,error:"Please enter a valid Google Drive link (should start with https://drive.google.com/file/d/)"})}catch(a){ue({isValid:!1,error:"Invalid URL format"})}},ze=async e=>{try{const r=(a=e.tags)?Array.isArray(a)?a:"string"==typeof a?a.split(",").map(e=>e.trim()).filter(Boolean):[]:[],l={title:e.title,description:e.description,meetLink:e.meetLink||"",recordingUrl:e.recordingUrl,duration:parseInt(e.duration)||0,fileSize:parseInt(e.fileSize)||0,quality:e.quality,visibility:e.visibility,category:e.category,tags:r,instructorId:W.uid,instructorEmail:W.email,instructorName:W.displayName||W.email,status:"recorded",recordingStatus:"available",isPublished:"public"===e.visibility,recordingAvailableFrom:new Date,courseId:"general"};return e.sessionId&&(l.sessionId=e.sessionId),await E.createRecording(l)}catch(r){throw new Error(r.message||"Failed to create recording")}var a},Re=m(e=>ze(e),{onSuccess:a=>{K.invalidateQueries(["recordings"]),K.invalidateQueries(["sessions"]),K.invalidateQueries(["teacherRecordings"]),K.invalidateQueries(["studentRecordings"]),K.invalidateQueries(["instructorMeetRecordings"]),ae("Recording saved successfully! Students can now access the Google Drive link."),J(!1),setTimeout(()=>{null==l||l(a),e()},2e3)},onError:e=>{X(e.message||"Failed to save recording. Please try again."),J(!1),de(0)}}),Ie=e=>{if(!e)return"0 MB";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["B","KB","MB","GB"][a]},Fe=u.useMemo(()=>[{value:"english",label:"English"},{value:"english_literature",label:"English Literature"},{value:"english_language",label:"English Language"},{value:"communications",label:"Communications"},{value:"general",label:"General Session"},{value:"mathematics",label:"Mathematics"},{value:"algebra",label:"Algebra"},{value:"geometry",label:"Geometry"},{value:"calculus",label:"Calculus"},{value:"statistics",label:"Statistics"},{value:"trigonometry",label:"Trigonometry"},{value:"physics",label:"Physics"},{value:"chemistry",label:"Chemistry"},{value:"biology",label:"Biology"},{value:"environmental_science",label:"Environmental Science"},{value:"earth_science",label:"Earth Science"},{value:"history",label:"History"},{value:"geography",label:"Geography"},{value:"civics",label:"Civics"},{value:"economics",label:"Economics"},{value:"political_science",label:"Political Science"},{value:"spanish",label:"Spanish"},{value:"french",label:"French"},{value:"german",label:"German"},{value:"mandarin",label:"Mandarin Chinese"},{value:"japanese",label:"Japanese"},{value:"art",label:"Art"},{value:"music",label:"Music"},{value:"drama",label:"Drama"},{value:"philosophy",label:"Philosophy"},{value:"computer_science",label:"Computer Science"},{value:"programming",label:"Programming"},{value:"web_development",label:"Web Development"},{value:"data_science",label:"Data Science"},{value:"business_studies",label:"Business Studies"},{value:"accounting",label:"Accounting"},{value:"marketing",label:"Marketing"},{value:"physical_education",label:"Physical Education"},{value:"health_education",label:"Health Education"},{value:"career_guidance",label:"Career Guidance"}],[]),Ue=u.useMemo(()=>[{value:"360p",label:"360p - Mobile (Low Quality)"},{value:"480p",label:"480p - Standard Definition"},{value:"720p",label:"720p - High Definition"},{value:"1080p",label:"1080p - Full HD"},{value:"4k",label:"4K - Ultra HD"}],[]),Pe=u.useMemo(()=>[{value:"private",label:"Private - Only me"},{value:"unlisted",label:"Unlisted - Anyone with link"},{value:"public",label:"Public - Visible to all students"}],[]),Ae=u.useMemo(()=>()=>g.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mb-6",children:[g.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-3",children:"Google Meet Recording Workflow"}),g.jsx("div",{className:"space-y-2",children:E.recordingWorkflow.getRecordingSteps().map((e,a)=>g.jsxs("div",{className:"flex items-start space-x-3",children:[g.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium "+(a<=xe?"bg-blue-500 text-white":"bg-blue-200 dark:bg-blue-800 text-blue-600 dark:text-blue-400"),children:a+1}),g.jsx("p",{className:"text-sm "+(a<=xe?"text-blue-800 dark:text-blue-200":"text-blue-600 dark:text-blue-400"),children:e})]},a))})]}),[xe]);return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in",children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto transform transition-all duration-300 scale-100",children:[g.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 rounded-t-2xl",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:g.jsx(b,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Add Recording"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Link your Google Drive recording (session is optional)"})]})]}),g.jsx("button",{onClick:e,disabled:Y,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:g.jsx(h,{size:24})})]}),Y&&g.jsxs("div",{className:"px-6 pt-4",children:[g.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:g.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${ie}%`}})}),g.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 text-center",children:ie<100?"Saving recording to database...":"Recording saved successfully!"})]}),Z&&g.jsxs("div",{className:"mx-6 mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start space-x-3 animate-slide-down",children:[g.jsx(p,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),g.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm flex-1",children:Z}),g.jsx("button",{onClick:()=>X(""),className:"text-red-500 hover:text-red-700 flex-shrink-0",children:g.jsx(h,{size:16})})]}),ee&&g.jsxs("div",{className:"mx-6 mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl flex items-start space-x-3 animate-slide-down",children:[g.jsx(v,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),g.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm flex-1",children:ee})]}),g.jsx("div",{className:"px-6 pt-4",children:g.jsx(Ae,{})}),g.jsxs("form",{onSubmit:ve(async e=>{try{X(""),ae(""),J(!0);const a=(()=>{de(0);const e=setInterval(()=>{de(a=>a>=90?(clearInterval(e),90):a+10)},200);return e})();if(!e.recordingUrl)throw new Error("Google Drive link is required");if(!ce.isValid)throw new Error("Please enter a valid Google Drive link");if(!e.title.trim())throw new Error("Recording title is required");e.meetLink||(e.meetLink="");const r=await Re.mutateAsync(e);return clearInterval(a),de(100),r}catch(a){X(a.message||"Failed to save recording. Please try again."),J(!1),de(0)}}),className:"p-6 space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white",children:"Link to Google Meet Session (Optional)"}),se?g.jsxs("div",{className:"flex items-center justify-center py-4",children:[g.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),g.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Loading Google Meet sessions..."})]}):0!==re.length||s?g.jsx(C,{options:re.map(e=>{var a;return{value:e.id,label:`${e.title} - ${null==(a=e.scheduledTime)?void 0:a.toLocaleDateString()}`,disabled:"available"===e.recordingStatus}}),value:De.sessionId,onChange:Me,placeholder:"Select a Google Meet session (optional)...",disabled:Y||!!s,error:null==(i=ye.sessionId)?void 0:i.message}):g.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:g.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"No Google Meet sessions found. You can create a standalone recording without linking to a session."})}),ne&&g.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:g.jsxs("div",{className:"flex items-start space-x-3",children:[g.jsx(y,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:ne.title}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm text-blue-700 dark:text-blue-300",children:[g.jsxs("div",{className:"flex items-center space-x-1",children:[g.jsx(y,{className:"h-4 w-4"}),g.jsx("span",{children:null==(n=ne.scheduledTime)?void 0:n.toLocaleDateString()})]}),g.jsxs("div",{className:"flex items-center space-x-1",children:[g.jsx(f,{className:"h-4 w-4"}),g.jsx("span",{children:null==(w=ne.scheduledTime)?void 0:w.toLocaleTimeString()})]}),g.jsxs("div",{className:"flex items-center space-x-1",children:[g.jsx(j,{className:"h-4 w-4"}),g.jsx("span",{children:ne.instructorName})]}),g.jsxs("div",{className:"flex items-center space-x-1",children:[g.jsx(k,{className:"h-4 w-4"}),g.jsx("span",{className:"capitalize",children:ne.status})]})]}),ne.meetLink&&g.jsx("div",{className:"mt-2",children:g.jsxs("a",{href:ne.meetLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[g.jsx(N,{size:14}),g.jsx("span",{children:"Join Google Meet"})]})})]})]})})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsx("div",{className:"lg:col-span-2",children:g.jsx(z,d({label:"Recording Title *",type:"text",placeholder:"Enter recording title...",error:null==(I=ye.title)?void 0:I.message,disabled:Y,required:!0,icon:S,autoFocus:!ne,ref:ge},pe("title",{required:"Recording title is required",minLength:{value:3,message:"Title must be at least 3 characters"},maxLength:{value:100,message:"Title cannot exceed 100 characters"}})))}),g.jsx("div",{className:"lg:col-span-2",children:g.jsx(R,d({label:"Description",rows:3,placeholder:"Describe the recording content...",error:null==(F=ye.description)?void 0:F.message,disabled:Y,ref:be},pe("description",{maxLength:{value:500,message:"Description cannot exceed 500 characters"}})))}),g.jsx("div",{children:g.jsx(z,d({label:"Google Meet Link (Optional)",type:"url",placeholder:"https://meet.google.com/...",error:null==(U=ye.meetLink)?void 0:U.message,disabled:Y||!!ne,icon:b},pe("meetLink",{pattern:{value:/https:\/\/meet\.google\.com\/[a-z-]+/,message:"Please enter a valid Google Meet link"}})))}),g.jsx(C,{label:"Subject *",options:Fe,value:De.category,onChange:Ge,disabled:Y,error:null==(P=ye.category)?void 0:P.message,icon:D}),g.jsxs("div",{className:"lg:col-span-2",children:[g.jsx(z,d({label:"Google Drive Recording Link *",type:"url",placeholder:"https://drive.google.com/file/d/...",error:(null==(A=ye.recordingUrl)?void 0:A.message)||ce.error&&!ce.isValid,disabled:Y,icon:M,required:!0,ref:he,autoFocus:!!ne},pe("recordingUrl",{required:"Google Drive link is required",pattern:{value:/https:\/\/drive\.google\.com\/(file\/d\/|open\?id=)([a-zA-Z0-9_-]+)/,message:"Please enter a valid Google Drive link"}}))),ce.isValid&&g.jsx("div",{className:"mt-3 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx(v,{className:"h-5 w-5 text-green-500"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Valid Google Drive Link"}),g.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["File ID: ",ce.fileId]})]})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsxs("a",{href:ce.viewUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 px-3 py-1 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors",children:[g.jsx(V,{size:14}),g.jsx("span",{children:"View"})]}),g.jsxs("a",{href:ce.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 px-3 py-1 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-colors",children:[g.jsx(M,{size:14}),g.jsx("span",{children:"Download"})]})]})]})}),ce.error&&!ce.isValid&&De.recordingUrl&&g.jsx("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(p,{className:"h-4 w-4 text-red-500"}),g.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:ce.error})]})}),g.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:g.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[g.jsx("strong",{children:"How to get your Google Drive link:"}),g.jsx("br",{}),"1. Go to drive.google.com",g.jsx("br",{}),'2. Find your recording in "Meet Recordings" folder',g.jsx("br",{}),'3. Right-click → "Share" → "Copy link"',g.jsx("br",{}),"4. Paste the link above"]})})]}),g.jsx("div",{children:g.jsx(z,(_e=d({label:"Duration (minutes) *",type:"number",placeholder:"Duration in minutes",min:"1",max:"480",error:null==(_=ye.duration)?void 0:_.message,disabled:Y,suffix:"minutes",icon:f},pe("duration",{required:"Duration is required",min:{value:1,message:"Duration must be at least 1 minute"},max:{value:480,message:"Duration cannot exceed 8 hours"}})),$e={onChange:e=>Ve(e.target.value)},a(_e,r($e))))}),g.jsx(C,{label:"Quality",options:Ue,value:De.quality,onChange:Le,disabled:Y,error:null==($=ye.quality)?void 0:$.message}),g.jsxs("div",{children:[g.jsx(z,d({label:"File Size (MB)",type:"number",placeholder:"File size in MB",min:"0",error:null==(B=ye.fileSize)?void 0:B.message,disabled:!0,suffix:"MB"},pe("fileSize"))),De.fileSize>0&&g.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[Ie(1024*De.fileSize*1024)," • Auto-calculated"]})]}),g.jsx(C,{label:"Visibility *",options:Pe,value:De.visibility,onChange:qe,disabled:Y,error:null==(O=ye.visibility)?void 0:O.message})]}),g.jsxs("div",{children:[g.jsx(z,d({label:"Tags",type:"text",placeholder:"math, algebra, lecture (comma separated)",error:null==(T=ye.tags)?void 0:T.message,disabled:Y},pe("tags",{validate:e=>{if(!e)return!0;const a="string"==typeof e?e.split(",").map(e=>e.trim()).filter(Boolean):Array.isArray(e)?e:[];return a.length>10?"Maximum 10 tags allowed":!a.some(e=>e.length>20)||"Each tag must be less than 20 characters"}}))),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Add relevant tags to help students find this recording"})]}),(De.duration>0||De.fileSize>0)&&g.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[g.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Recording Summary"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[De.duration>0&&g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(f,{className:"h-4 w-4 text-gray-400"}),g.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Duration: ",(e=>{if(!e)return"0:00";const a=Math.floor(e/60),r=Math.floor(e%60);return a>0?`${a}:${r.toString().padStart(2,"0")}:00`:`${r}:00`})(De.duration)]})]}),De.fileSize>0&&g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(L,{className:"h-4 w-4 text-gray-400"}),g.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Size: ",Ie(1024*De.fileSize*1024)]})]}),De.quality&&g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(b,{className:"h-4 w-4 text-gray-400"}),g.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Quality: ",De.quality.toUpperCase()]})]}),De.category&&g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(D,{className:"h-4 w-4 text-gray-400"}),g.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["Subject: ",null==(Q=Fe.find(e=>e.value===De.category))?void 0:Q.label]})]})]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[g.jsx(q,{type:"button",variant:"outline",onClick:e,disabled:Y,className:"w-full sm:w-auto",children:"Cancel"}),g.jsx(q,{type:"submit",disabled:Y||!fe||!je||!ce.isValid,loading:Y,className:"w-full sm:w-auto bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",icon:L,children:Y?"Saving...":"Save Recording"})]})]})]})});var _e,$e};export{I as C};
