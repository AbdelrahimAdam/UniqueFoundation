import{j as e,L as a}from"./index-fde0d62d.js";import{r}from"./vendor-0a74ad82.js";import{u as s}from"./userService-11868d81.js";import"./firebase-383b8577.js";import{B as t}from"./Button-e4864804.js";import{R as l}from"./refresh-cw-36e681e5.js";import{S as i}from"./search-6717dbe2.js";import{C as d}from"./check-9b2fada3.js";import{X as c}from"./x-c1108be6.js";import"./router-80e9042b.js";const x=()=>{const[x,n]=r.useState([]),[o,m]=r.useState(!0),[h,g]=r.useState(""),[p,y]=r.useState({});r.useEffect(()=>{j()},[]);const j=async()=>{try{m(!0);const e=await s.getAllUsers();n(e)}catch(e){}finally{m(!1)}},u=x.filter(e=>e.displayName?.toLowerCase().includes(h.toLowerCase())||e.email?.toLowerCase().includes(h.toLowerCase()));return o?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx(a,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"User Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage all user accounts and permissions"})]}),e.jsxs(t,{onClick:j,variant:"outline",children:[e.jsx(l,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:h,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:u.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:a.displayName?.charAt(0)||a.email?.charAt(0)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.displayName||"No Name"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+("admin"===a.role?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"teacher"===a.role?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"),children:a.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+(a.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"),children:a.isActive?"Active":"Pending"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[!a.isActive&&e.jsxs(t,{size:"sm",onClick:()=>(async e=>{try{y(a=>({...a,[e]:!0})),await s.approveUser(e),await j()}catch(a){}finally{y(a=>({...a,[e]:!1}))}})(a.id),disabled:p[a.id],children:[e.jsx(d,{className:"h-3 w-3 mr-1"}),"Approve"]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{y(a=>({...a,[e]:!0})),await s.deactivateUser(e),await j()}catch(a){}finally{y(a=>({...a,[e]:!1}))}})(a.id),disabled:p[a.id],children:[e.jsx(c,{className:"h-3 w-3 mr-1"}),a.isActive?"Deactivate":"Delete"]})]})})]},a.id))})]})})})]})};export{x as default};
